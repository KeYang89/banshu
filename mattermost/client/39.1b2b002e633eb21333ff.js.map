{"version":3,"sources":["webpack:///39.1b2b002e633eb21333ff.js","webpack:///./components/login/login_controller.jsx"],"names":["webpackJsonp","2007","module","exports","__webpack_require__","global","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","call","default","_interopRequireDefault","defineProperty","value","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_possibleConstructorReturn2","_possibleConstructorReturn3","_createClass2","_createClass3","_inherits2","_inherits3","_propTypes","_propTypes2","_react","_react2","_reactIntl","_reactRouter","_client","_global_actions","GlobalActions","_team_actions","_user_actions","_browser_store","_browser_store2","_user_store","_user_store2","_constants","_constants2","_text_formatting","TextFormatting","_utils","Utils","_logo","_logo2","_announcement_bar","_announcement_bar2","_form_error","_form_error2","_login_mfa","_login_mfa2","LoginController","_React$Component","props","this","_this","__proto__","preSubmit","bind","submit","finishSignin","handleLoginIdChange","handlePasswordChange","loginId","location","query","extra","SIGNIN_VERIFIED","email","state","ldapEnabled","window","mm_license","IsLicensed","mm_config","EnableLdap","usernameSigninEnabled","EnableSignInWithUsername","emailSigninEnabled","EnableSignInWithEmail","samlEnabled","EnableSaml","password","showMfa","loading","get","object","isRequired","params","document","title","SiteName","removeGlobalItem","getCurrentUser","redirectUserToDefaultTeam","refs","focus","e","_this2","preventDefault","newQuery","search","replace","browserHistory","pathname","hash","setState","trim","toLowerCase","msgId","serverError","createElement","FormattedMessage","id","values","ldapUsername","LdapLoginFieldName","localizeMessage","defaultMessage","checkMfa","requiresMfa","err","message","token","_this3","webLogin","h","data","d","inviteId","addUserToTeamFromInvite","team","push","encodeURIComponent","loadCurrentLocale","redirect_to","match","name","target","CustomBrand","EnableCustomBrand","text","CustomBrandText","src","Client4","getBrandImageUrl","dangerouslySetInnerHTML","__html","formatText","loginPlaceholders","length","slice","join","EnableSignUpWithEmail","EnableSignUpWithGitLab","EnableSignUpWithOffice365","EnableSignUpWithGoogle","extraParam","extraBox","SIGNIN_CHANGE","className","SESSION_EXPIRED","PASSWORD_CHANGE","loginControls","gitlabSigninEnabled","googleSigninEnabled","office365SigninEnabled","samlSigninEnabled","errorClass","loginButton","onSubmit","error","margin","ref","onChange","placeholder","createLoginPlaceholder","spellCheck","autoCapitalize","type","EnableOpenServer","checkSignUpEnabled","Link","to","href","getOAuthRoute","SamlLoginButtonText","content","customContent","customClass","createLoginOptions","createCustomLogin","description","CustomDescriptionText","Component"],"mappings":"AAAAA,cAAc,KAERC,KACA,SAAUC,EAAQC,EAASC,GAEjC,cAC4B,SAASC,GAoFrC,QAASC,GAAwBC,GAAO,GAAIA,GAAOA,EAAIC,WAAc,MAAOD,EAAc,IAAIE,KAAa,IAAW,MAAPF,EAAe,IAAK,GAAIG,KAAOH,GAAWI,OAAOC,UAAUC,eAAeC,KAAKP,EAAKG,KAAMD,EAAOC,GAAOH,EAAIG,GAAgC,OAAtBD,GAAOM,QAAUR,EAAYE,EAElQ,QAASO,GAAuBT,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,QAASR,GApFvFI,OAAOM,eAAed,EAAS,cAC3Be,OAAO,GAGX,IAAIC,GAAkBf,EAAoB,GAEtCgB,EAAmBJ,EAAuBG,GAE1CE,EAAmBjB,EAAoB,GAEvCkB,EAAmBN,EAAuBK,GAE1CE,EAA8BnB,EAAoB,GAElDoB,EAA8BR,EAAuBO,GAErDE,EAAgBrB,EAAoB,GAEpCsB,EAAgBV,EAAuBS,GAEvCE,EAAavB,EAAoB,GAEjCwB,EAAaZ,EAAuBW,GC3BxCE,EAAAzB,EAAA,GD+BI0B,EAAcd,EAAuBa,GC9BzCE,EAAA3B,EAAA,GDkCI4B,EAAUhB,EAAuBe,GCjCrCE,EAAA7B,EAAA,IACA8B,EAAA9B,EAAA,IAEA+B,EAAA/B,EAAA,IAEAgC,EAAAhC,EAAA,IAAYiC,EDsCQ/B,EAAwB8B,GCrC5CE,EAAAlC,EAAA,KACAmC,EAAAnC,EAAA,IACAoC,EAAApC,EAAA,KD2CIqC,EAAkBzB,EAAuBwB,GC1C7CE,EAAAtC,EAAA,ID8CIuC,EAAe3B,EAAuB0B,GC5C1CE,EAAAxC,EAAA,GDgDIyC,EAAc7B,EAAuB4B,GC/CzCE,EAAA1C,EAAA,KAAY2C,EDmDSzC,EAAwBwC,GClD7CE,EAAA5C,EAAA,IAAY6C,EDsDA3C,EAAwB0C,GCpDpCE,EAAA9C,EAAA,MDwDI+C,EAASnC,EAAuBkC,GCtDpCE,EAAAhD,EAAA,MD0DIiD,EAAqBrC,EAAuBoC,GCzDhDE,EAAAlD,EAAA,KD6DImD,EAAevC,EAAuBsC,GC3D1CE,EAAApD,EAAA,MD+DIqD,EAAczC,EAAuBwC,GC7DpBE,EDmEC,SAAUC,GC3D5B,QAAAD,GAAYE,IAAO,EAAAtC,EAAAP,SAAA8C,KAAAH,EAAA,IAAAI,IAAA,EAAAtC,EAAAT,SAAA8C,MAAAH,EAAAK,YAAA,EAAA3C,EAAAL,SAAA2C,IAAA5C,KAAA+C,KACTD,GAENE,GAAKE,UAAYF,EAAKE,UAAUC,KAAfH,GACjBA,EAAKI,OAASJ,EAAKI,OAAOD,KAAZH,GACdA,EAAKK,aAAeL,EAAKK,aAAaF,KAAlBH,GAEpBA,EAAKM,oBAAsBN,EAAKM,oBAAoBH,KAAzBH,GAC3BA,EAAKO,qBAAuBP,EAAKO,qBAAqBJ,KAA1BH,EAE5B,IAAIQ,GAAU,EAVC,OAWXR,GAAKF,MAAMW,SAASC,MAAMC,QAAU5B,EAAA9B,QAAU2D,iBAAmBZ,EAAKF,MAAMW,SAASC,MAAMG,QAC3FL,EAAUR,EAAKF,MAAMW,SAASC,MAAMG,OAGxCb,EAAKc,OACDC,YAAqD,SAAxCxE,EAAOyE,OAAOC,WAAWC,YAAgE,SAAvC3E,EAAOyE,OAAOG,UAAUC,WACvFC,sBAA4E,SAArD9E,EAAOyE,OAAOG,UAAUG,yBAC/CC,mBAAsE,SAAlDhF,EAAOyE,OAAOG,UAAUK,sBAC5CC,YAAqD,SAAxClF,EAAOyE,OAAOC,WAAWC,YAAgE,SAAvC3E,EAAOyE,OAAOG,UAAUO,WACvFlB,UACAmB,SAAU,GACVC,SAAS,EACTC,SAAS,GAvBE7B,EDusBnB,OA3oBA,EAAIlC,EAAWb,SAAS2C,EAAiBC,IACzC,EAAIjC,EAAcX,SAAS2C,EAAiB,OACxChD,IAAK,YACLkF,IAAK,WCrEL,OACIrB,SAAUzC,EAAAf,QAAU8E,OAAOC,WAC3BC,OAAQjE,EAAAf,QAAU8E,OAAOC,iBDyGjC,EAAIpE,EAAcX,SAAS2C,IACvBhD,IAAK,oBACLQ,MAAO,WC3EP8E,SAASC,MAAQ5F,EAAOyE,OAAOG,UAAUiB,SACzCzD,EAAA1B,QAAaoF,iBAAiB,QAC1BxD,EAAA5B,QAAUqF,kBACV/D,EAAcgE,4BAGdxC,KAAKD,MAAMW,SAASC,MAAMC,QAAU5B,EAAA9B,QAAU2D,iBAAmBb,KAAKD,MAAMW,SAASC,MAAMG,OAC3Fd,KAAKyC,KAAKb,SAASc,WDgFvB7F,IAAK,YACLQ,MAAO,SC7EDsF,GAAG,GAAAC,GAAA5C,IACT2C,GAAEE,gBADO,IAGFnC,GAAYV,KAAKD,MAAjBW,SACDoC,EAAWpC,EAASqC,OAAOC,QAAQ,6BAA8B,GACnEF,KAAapC,EAASqC,QACtB1E,EAAA4E,eAAeD,QAAf,GAA0BtC,EAASwC,SAAWJ,EAAWpC,EAASyC,KAKtE,IAAI1C,GAAUT,KAAKyC,KAAKhC,QAAQpD,KAC5BoD,KAAYT,KAAKe,MAAMN,SACvBT,KAAKoD,UAAU3C,WAGnB,IAAMmB,GAAW5B,KAAKyC,KAAKb,SAASvE,KAQpC,IAPIuE,IAAa5B,KAAKe,MAAMa,UACxB5B,KAAKoD,UAAUxB,eAInBnB,EAAUA,EAAQ4C,OAAOC,eAEX,CAEV,GAAIC,GAAQ,UAqBZ,OApBIvD,MAAKe,MAAMS,qBACX+B,GAAS,SAETvD,KAAKe,MAAMO,wBACXiC,GAAS,YAETvD,KAAKe,MAAMC,cACXuC,GAAS,oBAGbvD,MAAKoD,UACDI,YACIrF,EAAAjB,QAAAuG,cAAArF,EAAAsF,kBACIC,GAAIJ,EACJK,QACIC,aAAcrH,EAAOyE,OAAOG,UAAU0C,oBAAsB1E,EAAM2E,gBAAgB,0BAA2B,yBAQjI,IAAKnC,EASD,WARA5B,MAAKoD,UACDI,YACIrF,EAAAjB,QAAAuG,cAAArF,EAAAsF,kBACIC,GAAG,mBACHK,eAAe,kCAO/B,EAAAtF,EAAAuF,UACIxD,EACA,SAACyD,GACOA,EACAtB,EAAKQ,UAAUvB,SAAS,IAExBe,EAAKvC,OAAOI,EAASmB,EAAU,KAGvC,SAACuC,GACGvB,EAAKQ,UAAUI,YAAaW,EAAIC,eD6ExCvH,IAAK,SACLQ,MAAO,SCzEJoD,EAASmB,EAAUyC,GAAO,GAAAC,GAAAtE,IAC7BA,MAAKoD,UAAUI,YAAa,KAAM1B,SAAS,KAE3C,EAAApD,EAAA6F,UACI9D,EACAmB,EACAyC,EACA,WAEI,GAAMlB,GAAOmB,EAAKvE,MAAMW,SAASC,MAAM6D,EACjCC,EAAOH,EAAKvE,MAAMW,SAASC,MAAM+D,EACjCC,EAAWL,EAAKvE,MAAMW,SAASC,MAAMgD,EAC3C,IAAIgB,GAAYxB,EAcZ,YAbA,EAAA1E,EAAAmG,yBACIH,EACAtB,EACAwB,EACA,SAACE,GACGP,EAAKhE,aAAauE,IAEtB,WAEIP,EAAKhE,gBAOjBgE,GAAKhE,gBAET,SAAC6D,GACkB,0CAAXA,EAAIR,GACJtF,EAAA4E,eAAe6B,KAAK,+BAAiCC,mBAAmBtE,IACtD,2CAAX0D,EAAIR,IACA,oDAAXQ,EAAIR,GACJW,EAAKlB,UACDvB,SAAS,EACTC,SAAS,EACT0B,YACIrF,EAAAjB,QAAAuG,cAAArF,EAAAsF,kBACIC,GAAG,qBACHK,eAAe,mEAIT,mDAAXG,EAAIR,IAAsE,iDAAXQ,EAAIR,GAC1EW,EAAKlB,UACDvB,SAAS,EACTC,SAAS,EACT0B,YACIrF,EAAAjB,QAAAuG,cAAArF,EAAAsF,kBACIC,GAAG,wBACHK,eAAe,kCAK3BM,EAAKlB,UAAUvB,SAAS,EAAO2B,YAAaW,EAAIC,QAAStC,SAAS,SDgE9EjF,IAAK,eACLQ,MAAO,SC3DEwH,GACT,GAAMlE,GAAQX,KAAKD,MAAMW,SAASC,KAClCnC,GAAcwG,oBACVrE,EAAMsE,aAAetE,EAAMsE,YAAYC,MAAM,gBAC7C7G,EAAA4E,eAAe6B,KAAKnE,EAAMsE,aACnBJ,EACPxG,EAAA4E,eAAe6B,KAAf,IAAwBD,EAAKM,MAE7B3G,EAAcgE,+BD+DlB3F,IAAK,sBACLQ,MAAO,SC5DSsF,GAChB3C,KAAKoD,UACD3C,QAASkC,EAAEyC,OAAO/H,WDgEtBR,IAAK,uBACLQ,MAAO,SC7DUsF,GACjB3C,KAAKoD,UACDxB,SAAUe,EAAEyC,OAAO/H,WDiEvBR,IAAK,oBACLQ,MAAO,WC7DP,GAA4C,SAAxCb,EAAOyE,OAAOC,WAAWC,YACoB,SAAzC3E,EAAOyE,OAAOC,WAAWmE,aACqB,SAA9C7I,EAAOyE,OAAOG,UAAUkE,kBAA8B,CAC1D,GAAMC,GAAO/I,EAAOyE,OAAOG,UAAUoE,iBAAmB,EAExD,OACIrH,GAAAjB,QAAAuG,cAAA,WACItF,EAAAjB,QAAAuG,cAAA,OACIgC,IAAKnH,EAAAoH,QAAQC,iBAAiB,KAElCxH,EAAAjB,QAAAuG,cAAA,KAAGmC,yBAA0BC,OAAQ3G,EAAe4G,WAAWP,OAK3E,MAAO,SD+DP1I,IAAK,yBACLQ,MAAO,WC5DP,GAAM2D,GAAchB,KAAKe,MAAMC,YACzBM,EAAwBtB,KAAKe,MAAMO,sBACnCE,EAAqBxB,KAAKe,MAAMS,mBAEhCuE,IAiBN,OAhBIvE,IACAuE,EAAkBjB,KAAK1F,EAAM2E,gBAAgB,cAAe,UAG5DzC,GACAyE,EAAkBjB,KAAK1F,EAAM2E,gBAAgB,iBAAkB,aAG/D/C,IACIxE,EAAOyE,OAAOG,UAAU0C,mBACxBiC,EAAkBjB,KAAKtI,EAAOyE,OAAOG,UAAU0C,oBAE/CiC,EAAkBjB,KAAK1F,EAAM2E,gBAAgB,qBAAsB,sBAIvEgC,EAAkBC,QAAU,EACrBD,EAAkBE,MAAM,EAAGF,EAAkBC,OAAS,GAAGE,KAAK,MACjE9G,EAAM2E,gBAAgB,sBAAuB,QAC7CgC,EAAkBA,EAAkBC,OAAS,GACb,IAA7BD,EAAkBC,OAClBD,EAAkB,GAGtB,MD8DPlJ,IAAK,qBACLQ,MAAO,WC3DP,MAAyD,SAAlDb,EAAOyE,OAAOG,UAAU+E,uBACwB,SAAnD3J,EAAOyE,OAAOG,UAAUgF,wBAC8B,SAAtD5J,EAAOyE,OAAOG,UAAUiF,2BAC2B,SAAnD7J,EAAOyE,OAAOG,UAAUkF,wBACe,SAAvC9J,EAAOyE,OAAOG,UAAUC,YACe,SAAvC7E,EAAOyE,OAAOG,UAAUO,cD0D5B9E,IAAK,qBACLQ,MAAO,WCvDP,GAAMkJ,GAAavG,KAAKD,MAAMW,SAASC,MAAMC,MACzC4F,EAAW,EACXD,KACIA,IAAevH,EAAA9B,QAAUuJ,cACzBD,EACIrI,EAAAjB,QAAAuG,cAAA,OAAKiD,UAAU,uBACXvI,EAAAjB,QAAAuG,cAAA,KAAGiD,UAAU,gBACbvI,EAAAjB,QAAAuG,cAAArF,EAAAsF,kBACIC,GAAG,gBACHK,eAAe,0CAIpBuC,IAAevH,EAAA9B,QAAU2D,gBAChC2F,EACIrI,EAAAjB,QAAAuG,cAAA,OAAKiD,UAAU,uBACXvI,EAAAjB,QAAAuG,cAAA,KAAGiD,UAAU,gBACbvI,EAAAjB,QAAAuG,cAAArF,EAAAsF,kBACIC,GAAG,iBACHK,eAAe,qBAIpBuC,IAAevH,EAAA9B,QAAUyJ,gBAChCH,EACIrI,EAAAjB,QAAAuG,cAAA,OAAKiD,UAAU,uBACXvI,EAAAjB,QAAAuG,cAAA,KAAGiD,UAAU,+BACbvI,EAAAjB,QAAAuG,cAAArF,EAAAsF,kBACIC,GAAG,wBACHK,eAAe,oDAIpBuC,IAAevH,EAAA9B,QAAU0J,kBAChCJ,EACIrI,EAAAjB,QAAAuG,cAAA,OAAKiD,UAAU,uBACXvI,EAAAjB,QAAAuG,cAAA,KAAGiD,UAAU,gBACbvI,EAAAjB,QAAAuG,cAAArF,EAAAsF,kBACIC,GAAG,wBACHK,eAAe,qCAOnC,IAAM6C,MAEA7F,EAAchB,KAAKe,MAAMC,YACzB8F,EAAyE,SAAnDtK,EAAOyE,OAAOG,UAAUgF,uBAC9CW,EAAyE,SAAnDvK,EAAOyE,OAAOG,UAAUkF,uBAC9CU,EAA+E,SAAtDxK,EAAOyE,OAAOG,UAAUiF,0BACjDY,EAAoBjH,KAAKe,MAAMW,YAC/BJ,EAAwBtB,KAAKe,MAAMO,sBACnCE,EAAqBxB,KAAKe,MAAMS,kBAEtC,IAAIA,GAAsBF,GAAyBN,EAAa,CAC5D,GAAIkG,GAAa,EACblH,MAAKe,MAAMyC,cACX0D,EAAa,aAGjB,IAAIC,GACChJ,EAAAjB,QAAAuG,cAAArF,EAAAsF,kBACGC,GAAG,eACHK,eAAe,WAGnBhE,MAAKe,MAAMe,UACXqF,EACChJ,EAAAjB,QAAAuG,cAAA,YACGtF,EAAAjB,QAAAuG,cAAA,QAAMiD,UAAU,+BAChBvI,EAAAjB,QAAAuG,cAAArF,EAAAsF,kBACIC,GAAG,sBACHK,eAAe,oBAK3B6C,EAAc/B,KACV3G,EAAAjB,QAAAuG,cAAA,QACI5G,IAAI,aACJuK,SAAUpH,KAAKG,WAEfhC,EAAAjB,QAAAuG,cAAA,OAAKiD,UAAU,2BACXvI,EAAAjB,QAAAuG,cAAA/D,EAAAxC,SACImK,MAAOrH,KAAKe,MAAMyC,YAClB8D,QAAQ,IAEZnJ,EAAAjB,QAAAuG,cAAA,OAAKiD,UAAW,aAAeQ,GAC3B/I,EAAAjB,QAAAuG,cAAA,SACIE,GAAG,UACH+C,UAAU,eACVa,IAAI,UACJpC,KAAK,UACL9H,MAAO2C,KAAKe,MAAMN,QAClB+G,SAAUxH,KAAKO,oBACfkH,YAAazH,KAAK0H,yBAClBC,WAAW,QACXC,eAAe,SAGvBzJ,EAAAjB,QAAAuG,cAAA,OAAKiD,UAAW,aAAeQ,GAC3B/I,EAAAjB,QAAAuG,cAAA,SACIE,GAAG,gBACHkE,KAAK,WACLnB,UAAU,eACVa,IAAI,WACJpC,KAAK,WACL9H,MAAO2C,KAAKe,MAAMa,SAClB4F,SAAUxH,KAAKQ,qBACfiH,YAAarI,EAAM2E,gBAAgB,iBAAkB,YACrD4D,WAAW,WAGnBxJ,EAAAjB,QAAAuG,cAAA,OAAKiD,UAAU,cACXvI,EAAAjB,QAAAuG,cAAA,UACIE,GAAG,cACHkE,KAAK,SACLnB,UAAU,mBAERS,OAoK1B,MA5JiD,SAA7C3K,EAAOyE,OAAOG,UAAU0G,kBAA+B9H,KAAK+H,sBAC5DlB,EAAc/B,KACV3G,EAAAjB,QAAAuG,cAAA,OACIiD,UAAU,aACV7J,IAAI,UAEJsB,EAAAjB,QAAAuG,cAAA,YACItF,EAAAjB,QAAAuG,cAAArF,EAAAsF,kBACIC,GAAG,kBACHK,eAAe,4BAEnB7F,EAAAjB,QAAAuG,cAAApF,EAAA2J,MACIrE,GAAG,SACHsE,GAAI,wBAA0BjI,KAAKD,MAAMW,SAASqC,OAClD2D,UAAU,qBAEVvI,EAAAjB,QAAAuG,cAAArF,EAAAsF,kBACIC,GAAG,eACHK,eAAe,wBAQnC1C,GAAyBE,IACzBqF,EAAc/B,KACV3G,EAAAjB,QAAAuG,cAAA,OACI5G,IAAI,iBACJ6J,UAAU,cAEVvI,EAAAjB,QAAAuG,cAAApF,EAAA2J,MAAMC,GAAI,mBACN9J,EAAAjB,QAAAuG,cAAArF,EAAAsF,kBACIC,GAAG,eACHK,eAAe,6BAO9BxC,GAAsBF,GAAyBN,KAAiB8F,GAAuBC,GAAuBE,GAAqBD,KACpIH,EAAc/B,KACV3G,EAAAjB,QAAAuG,cAAA,OACI5G,IAAI,UACJ6J,UAAU,iBAEVvI,EAAAjB,QAAAuG,cAAArF,EAAAsF,kBACIC,GAAG,WACHK,eAAe,SAK3B6C,EAAc/B,KACV3G,EAAAjB,QAAAuG,cAAA,MAAI5G,IAAI,eACJsB,EAAAjB,QAAAuG,cAAArF,EAAAsF,kBACIC,GAAG,mBACHK,eAAe,qBAM3B8C,GACAD,EAAc/B,KACV3G,EAAAjB,QAAAuG,cAAA,KACIiD,UAAU,8BACV7J,IAAI,SACJqL,KAAM5J,EAAAoH,QAAQyC,gBAAkB,gBAAkBnI,KAAKD,MAAMW,SAASqC,QAEtE5E,EAAAjB,QAAAuG,cAAA,YACItF,EAAAjB,QAAAuG,cAAA,QAAMiD,UAAU,SAChBvI,EAAAjB,QAAAuG,cAAA,YACItF,EAAAjB,QAAAuG,cAAArF,EAAAsF,kBACIC,GAAG,eACHK,eAAe,eAQnC+C,GACAF,EAAc/B,KACV3G,EAAAjB,QAAAuG,cAAA,KACIiD,UAAU,8BACV7J,IAAI,SACJqL,KAAM5J,EAAAoH,QAAQyC,gBAAkB,gBAAkBnI,KAAKD,MAAMW,SAASqC,QAEtE5E,EAAAjB,QAAAuG,cAAA,YACItF,EAAAjB,QAAAuG,cAAA,QAAMiD,UAAU,SAChBvI,EAAAjB,QAAAuG,cAAA,YACItF,EAAAjB,QAAAuG,cAAArF,EAAAsF,kBACIC,GAAG,eACHK,eAAe,oBAQnCgD,GACAH,EAAc/B,KACV3G,EAAAjB,QAAAuG,cAAA,KACIiD,UAAU,iCACV7J,IAAI,YACJqL,KAAM5J,EAAAoH,QAAQyC,gBAAkB,mBAAqBnI,KAAKD,MAAMW,SAASqC,QAEzE5E,EAAAjB,QAAAuG,cAAA,YACItF,EAAAjB,QAAAuG,cAAA,QAAMiD,UAAU,SAChBvI,EAAAjB,QAAAuG,cAAA,YACItF,EAAAjB,QAAAuG,cAAArF,EAAAsF,kBACIC,GAAG,kBACHK,eAAe,mBAQnCiD,GACAJ,EAAc/B,KACV3G,EAAAjB,QAAAuG,cAAA,KACIiD,UAAU,4BACV7J,IAAI,OACJqL,KAAM,kBAAoBlI,KAAKD,MAAMW,SAASqC,QAE9C5E,EAAAjB,QAAAuG,cAAA,YACItF,EAAAjB,QAAAuG,cAAA,QAAMiD,UAAU,mCAChBvI,EAAAjB,QAAAuG,cAAA,YACKjH,EAAOyE,OAAOG,UAAUgH,wBAOhB,IAAzBvB,EAAcb,QACda,EAAc/B,KACV3G,EAAAjB,QAAAuG,cAAA/D,EAAAxC,SACImK,MACIlJ,EAAAjB,QAAAuG,cAAArF,EAAAsF,kBACIC,GAAG,kBACHK,eAAe,8EAGvBsD,QAAQ,KAMhBnJ,EAAAjB,QAAAuG,cAAA,WACK+C,EACAK,MDyFThK,IAAK,SACLQ,MAAO,WCpFP,GAAIgL,UACAC,SACAC,QACAvI,MAAKe,MAAMc,QACXwG,EACIlK,EAAAjB,QAAAuG,cAAA7D,EAAA1C,SACIuD,QAAST,KAAKe,MAAMN,QACpBmB,SAAU5B,KAAKe,MAAMa,SACrBvB,OAAQL,KAAKK,UAIrBgI,EAAUrI,KAAKwI,sBACfF,EAAgBtI,KAAKyI,uBAEjBF,EAAc,WAItB,IAAIG,GAAc,IAYlB,OAVIA,GADwC,SAAxClM,EAAOyE,OAAOC,WAAWC,YAAkE,SAAzC3E,EAAOyE,OAAOC,WAAWmE,aAAwE,SAA9C7I,EAAOyE,OAAOG,UAAUkE,kBAC/G9I,EAAOyE,OAAOG,UAAUuH,sBAGlCxK,EAAAjB,QAAAuG,cAAArF,EAAAsF,kBACIC,GAAG,uBACHK,eAAe,4EAMvB7F,EAAAjB,QAAAuG,cAAA,WACItF,EAAAjB,QAAAuG,cAAAjE,EAAAtC,QAAA,MACAiB,EAAAjB,QAAAuG,cAAA,OAAKiD,UAAU,aACXvI,EAAAjB,QAAAuG,cAAA,OAAKiD,UAAW,0BAA4B6B,GACxCpK,EAAAjB,QAAAuG,cAAA,OAAKiD,UAAU,oBACV4B,GAELnK,EAAAjB,QAAAuG,cAAA,OACIiD,UAAU,mBACVjB,IAAAnG,EAAApC,UAEJiB,EAAAjB,QAAAuG,cAAA,OAAKiD,UAAU,mBACXvI,EAAAjB,QAAAuG,cAAA,UAAKjH,EAAOyE,OAAOG,UAAUiB,UAC7BlE,EAAAjB,QAAAuG,cAAA,MAAIiD,UAAU,gBACTgC,GAEJL,UDuGlBxI,GC/sBkC1B,EAAAjB,QAAM0L,UDmtBnDtM,GAAQY,QCntBa2C,IDotBQ5C,KAAKX,EAASC,EAAoB","file":"39.1b2b002e633eb21333ff.js","sourcesContent":["webpackJsonp([39],{\n\n/***/ 2007:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(5);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(3);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(6);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _createClass2 = __webpack_require__(4);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _inherits2 = __webpack_require__(7);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(8);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(17);\n\nvar _reactRouter = __webpack_require__(34);\n\nvar _client = __webpack_require__(28);\n\nvar _global_actions = __webpack_require__(56);\n\nvar GlobalActions = _interopRequireWildcard(_global_actions);\n\nvar _team_actions = __webpack_require__(387);\n\nvar _user_actions = __webpack_require__(66);\n\nvar _browser_store = __webpack_require__(126);\n\nvar _browser_store2 = _interopRequireDefault(_browser_store);\n\nvar _user_store = __webpack_require__(27);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _constants = __webpack_require__(9);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _text_formatting = __webpack_require__(100);\n\nvar TextFormatting = _interopRequireWildcard(_text_formatting);\n\nvar _utils = __webpack_require__(16);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _logo = __webpack_require__(1949);\n\nvar _logo2 = _interopRequireDefault(_logo);\n\nvar _announcement_bar = __webpack_require__(1951);\n\nvar _announcement_bar2 = _interopRequireDefault(_announcement_bar);\n\nvar _form_error = __webpack_require__(217);\n\nvar _form_error2 = _interopRequireDefault(_form_error);\n\nvar _login_mfa = __webpack_require__(1954);\n\nvar _login_mfa2 = _interopRequireDefault(_login_mfa);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar LoginController = function (_React$Component) {\n    (0, _inherits3.default)(LoginController, _React$Component);\n    (0, _createClass3.default)(LoginController, null, [{\n        key: 'propTypes',\n        get: function get() {\n            return {\n                location: _propTypes2.default.object.isRequired,\n                params: _propTypes2.default.object.isRequired\n            };\n        }\n    }]);\n\n    function LoginController(props) {\n        (0, _classCallCheck3.default)(this, LoginController);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (LoginController.__proto__ || (0, _getPrototypeOf2.default)(LoginController)).call(this, props));\n\n        _this.preSubmit = _this.preSubmit.bind(_this);\n        _this.submit = _this.submit.bind(_this);\n        _this.finishSignin = _this.finishSignin.bind(_this);\n\n        _this.handleLoginIdChange = _this.handleLoginIdChange.bind(_this);\n        _this.handlePasswordChange = _this.handlePasswordChange.bind(_this);\n\n        var loginId = '';\n        if (_this.props.location.query.extra === _constants2.default.SIGNIN_VERIFIED && _this.props.location.query.email) {\n            loginId = _this.props.location.query.email;\n        }\n\n        _this.state = {\n            ldapEnabled: global.window.mm_license.IsLicensed === 'true' && global.window.mm_config.EnableLdap === 'true',\n            usernameSigninEnabled: global.window.mm_config.EnableSignInWithUsername === 'true',\n            emailSigninEnabled: global.window.mm_config.EnableSignInWithEmail === 'true',\n            samlEnabled: global.window.mm_license.IsLicensed === 'true' && global.window.mm_config.EnableSaml === 'true',\n            loginId: loginId,\n            password: '',\n            showMfa: false,\n            loading: false\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(LoginController, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            document.title = global.window.mm_config.SiteName;\n            _browser_store2.default.removeGlobalItem('team');\n            if (_user_store2.default.getCurrentUser()) {\n                GlobalActions.redirectUserToDefaultTeam();\n            }\n\n            if (this.props.location.query.extra === _constants2.default.SIGNIN_VERIFIED && this.props.location.query.email) {\n                this.refs.password.focus();\n            }\n        }\n    }, {\n        key: 'preSubmit',\n        value: function preSubmit(e) {\n            var _this2 = this;\n\n            e.preventDefault();\n\n            var location = this.props.location;\n\n            var newQuery = location.search.replace(/(extra=password_change)&?/i, '');\n            if (newQuery !== location.search) {\n                _reactRouter.browserHistory.replace('' + location.pathname + newQuery + location.hash);\n            }\n\n            // password managers don't always call onInput handlers for form fields so it's possible\n            // for the state to get out of sync with what the user sees in the browser\n            var loginId = this.refs.loginId.value;\n            if (loginId !== this.state.loginId) {\n                this.setState({ loginId: loginId });\n            }\n\n            var password = this.refs.password.value;\n            if (password !== this.state.password) {\n                this.setState({ password: password });\n            }\n\n            // don't trim the password since we support spaces in passwords\n            loginId = loginId.trim().toLowerCase();\n\n            if (!loginId) {\n                // it's slightly weird to be constructing the message ID, but it's a bit nicer than triply nested if statements\n                var msgId = 'login.no';\n                if (this.state.emailSigninEnabled) {\n                    msgId += 'Email';\n                }\n                if (this.state.usernameSigninEnabled) {\n                    msgId += 'Username';\n                }\n                if (this.state.ldapEnabled) {\n                    msgId += 'LdapUsername';\n                }\n\n                this.setState({\n                    serverError: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: msgId,\n                        values: {\n                            ldapUsername: global.window.mm_config.LdapLoginFieldName || Utils.localizeMessage('login.ldapUsernameLower', 'AD/LDAP username')\n                        }\n                    })\n                });\n                return;\n            }\n\n            if (!password) {\n                this.setState({\n                    serverError: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'login.noPassword',\n                        defaultMessage: 'Please enter your password'\n                    })\n                });\n                return;\n            }\n\n            (0, _user_actions.checkMfa)(loginId, function (requiresMfa) {\n                if (requiresMfa) {\n                    _this2.setState({ showMfa: true });\n                } else {\n                    _this2.submit(loginId, password, '');\n                }\n            }, function (err) {\n                _this2.setState({ serverError: err.message });\n            });\n        }\n    }, {\n        key: 'submit',\n        value: function submit(loginId, password, token) {\n            var _this3 = this;\n\n            this.setState({ serverError: null, loading: true });\n\n            (0, _user_actions.webLogin)(loginId, password, token, function () {\n                // check for query params brought over from signup_user_complete\n                var hash = _this3.props.location.query.h;\n                var data = _this3.props.location.query.d;\n                var inviteId = _this3.props.location.query.id;\n                if (inviteId || hash) {\n                    (0, _team_actions.addUserToTeamFromInvite)(data, hash, inviteId, function (team) {\n                        _this3.finishSignin(team);\n                    }, function () {\n                        // there's not really a good way to deal with this, so just let the user log in like normal\n                        _this3.finishSignin();\n                    });\n\n                    return;\n                }\n\n                _this3.finishSignin();\n            }, function (err) {\n                if (err.id === 'api.user.login.not_verified.app_error') {\n                    _reactRouter.browserHistory.push('/should_verify_email?&email=' + encodeURIComponent(loginId));\n                } else if (err.id === 'store.sql_user.get_for_login.app_error' || err.id === 'ent.ldap.do_login.user_not_registered.app_error') {\n                    _this3.setState({\n                        showMfa: false,\n                        loading: false,\n                        serverError: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'login.userNotFound',\n                            defaultMessage: 'We couldn\\'t find an account matching your login credentials.'\n                        })\n                    });\n                } else if (err.id === 'api.user.check_user_password.invalid.app_error' || err.id === 'ent.ldap.do_login.invalid_password.app_error') {\n                    _this3.setState({\n                        showMfa: false,\n                        loading: false,\n                        serverError: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'login.invalidPassword',\n                            defaultMessage: 'Your password is incorrect.'\n                        })\n                    });\n                } else {\n                    _this3.setState({ showMfa: false, serverError: err.message, loading: false });\n                }\n            });\n        }\n    }, {\n        key: 'finishSignin',\n        value: function finishSignin(team) {\n            var query = this.props.location.query;\n            GlobalActions.loadCurrentLocale();\n            if (query.redirect_to && query.redirect_to.match(/^\\/([^/]|$)/)) {\n                _reactRouter.browserHistory.push(query.redirect_to);\n            } else if (team) {\n                _reactRouter.browserHistory.push('/' + team.name);\n            } else {\n                GlobalActions.redirectUserToDefaultTeam();\n            }\n        }\n    }, {\n        key: 'handleLoginIdChange',\n        value: function handleLoginIdChange(e) {\n            this.setState({\n                loginId: e.target.value\n            });\n        }\n    }, {\n        key: 'handlePasswordChange',\n        value: function handlePasswordChange(e) {\n            this.setState({\n                password: e.target.value\n            });\n        }\n    }, {\n        key: 'createCustomLogin',\n        value: function createCustomLogin() {\n            if (global.window.mm_license.IsLicensed === 'true' && global.window.mm_license.CustomBrand === 'true' && global.window.mm_config.EnableCustomBrand === 'true') {\n                var text = global.window.mm_config.CustomBrandText || '';\n\n                return _react2.default.createElement(\n                    'div',\n                    null,\n                    _react2.default.createElement('img', {\n                        src: _client.Client4.getBrandImageUrl(0)\n                    }),\n                    _react2.default.createElement('p', { dangerouslySetInnerHTML: { __html: TextFormatting.formatText(text) } })\n                );\n            }\n\n            return null;\n        }\n    }, {\n        key: 'createLoginPlaceholder',\n        value: function createLoginPlaceholder() {\n            var ldapEnabled = this.state.ldapEnabled;\n            var usernameSigninEnabled = this.state.usernameSigninEnabled;\n            var emailSigninEnabled = this.state.emailSigninEnabled;\n\n            var loginPlaceholders = [];\n            if (emailSigninEnabled) {\n                loginPlaceholders.push(Utils.localizeMessage('login.email', 'Email'));\n            }\n\n            if (usernameSigninEnabled) {\n                loginPlaceholders.push(Utils.localizeMessage('login.username', 'Username'));\n            }\n\n            if (ldapEnabled) {\n                if (global.window.mm_config.LdapLoginFieldName) {\n                    loginPlaceholders.push(global.window.mm_config.LdapLoginFieldName);\n                } else {\n                    loginPlaceholders.push(Utils.localizeMessage('login.ldapUsername', 'AD/LDAP Username'));\n                }\n            }\n\n            if (loginPlaceholders.length >= 2) {\n                return loginPlaceholders.slice(0, loginPlaceholders.length - 1).join(', ') + Utils.localizeMessage('login.placeholderOr', ' or ') + loginPlaceholders[loginPlaceholders.length - 1];\n            } else if (loginPlaceholders.length === 1) {\n                return loginPlaceholders[0];\n            }\n\n            return '';\n        }\n    }, {\n        key: 'checkSignUpEnabled',\n        value: function checkSignUpEnabled() {\n            return global.window.mm_config.EnableSignUpWithEmail === 'true' || global.window.mm_config.EnableSignUpWithGitLab === 'true' || global.window.mm_config.EnableSignUpWithOffice365 === 'true' || global.window.mm_config.EnableSignUpWithGoogle === 'true' || global.window.mm_config.EnableLdap === 'true' || global.window.mm_config.EnableSaml === 'true';\n        }\n    }, {\n        key: 'createLoginOptions',\n        value: function createLoginOptions() {\n            var extraParam = this.props.location.query.extra;\n            var extraBox = '';\n            if (extraParam) {\n                if (extraParam === _constants2.default.SIGNIN_CHANGE) {\n                    extraBox = _react2.default.createElement(\n                        'div',\n                        { className: 'alert alert-success' },\n                        _react2.default.createElement('i', { className: 'fa fa-check' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'login.changed',\n                            defaultMessage: ' Sign-in method changed successfully'\n                        })\n                    );\n                } else if (extraParam === _constants2.default.SIGNIN_VERIFIED) {\n                    extraBox = _react2.default.createElement(\n                        'div',\n                        { className: 'alert alert-success' },\n                        _react2.default.createElement('i', { className: 'fa fa-check' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'login.verified',\n                            defaultMessage: ' Email Verified'\n                        })\n                    );\n                } else if (extraParam === _constants2.default.SESSION_EXPIRED) {\n                    extraBox = _react2.default.createElement(\n                        'div',\n                        { className: 'alert alert-warning' },\n                        _react2.default.createElement('i', { className: 'fa fa-exclamation-triangle' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'login.session_expired',\n                            defaultMessage: ' Your session has expired. Please login again.'\n                        })\n                    );\n                } else if (extraParam === _constants2.default.PASSWORD_CHANGE) {\n                    extraBox = _react2.default.createElement(\n                        'div',\n                        { className: 'alert alert-success' },\n                        _react2.default.createElement('i', { className: 'fa fa-check' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'login.passwordChanged',\n                            defaultMessage: ' Password updated successfully'\n                        })\n                    );\n                }\n            }\n\n            var loginControls = [];\n\n            var ldapEnabled = this.state.ldapEnabled;\n            var gitlabSigninEnabled = global.window.mm_config.EnableSignUpWithGitLab === 'true';\n            var googleSigninEnabled = global.window.mm_config.EnableSignUpWithGoogle === 'true';\n            var office365SigninEnabled = global.window.mm_config.EnableSignUpWithOffice365 === 'true';\n            var samlSigninEnabled = this.state.samlEnabled;\n            var usernameSigninEnabled = this.state.usernameSigninEnabled;\n            var emailSigninEnabled = this.state.emailSigninEnabled;\n\n            if (emailSigninEnabled || usernameSigninEnabled || ldapEnabled) {\n                var errorClass = '';\n                if (this.state.serverError) {\n                    errorClass = ' has-error';\n                }\n\n                var loginButton = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'login.signIn',\n                    defaultMessage: 'Sign in'\n                });\n\n                if (this.state.loading) {\n                    loginButton = _react2.default.createElement(\n                        'span',\n                        null,\n                        _react2.default.createElement('span', { className: 'fa fa-refresh icon--rotate' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'login.signInLoading',\n                            defaultMessage: 'Signing in...'\n                        })\n                    );\n                }\n\n                loginControls.push(_react2.default.createElement(\n                    'form',\n                    {\n                        key: 'loginBoxes',\n                        onSubmit: this.preSubmit\n                    },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'signup__email-container' },\n                        _react2.default.createElement(_form_error2.default, {\n                            error: this.state.serverError,\n                            margin: true\n                        }),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'form-group' + errorClass },\n                            _react2.default.createElement('input', {\n                                id: 'loginId',\n                                className: 'form-control',\n                                ref: 'loginId',\n                                name: 'loginId',\n                                value: this.state.loginId,\n                                onChange: this.handleLoginIdChange,\n                                placeholder: this.createLoginPlaceholder(),\n                                spellCheck: 'false',\n                                autoCapitalize: 'off'\n                            })\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'form-group' + errorClass },\n                            _react2.default.createElement('input', {\n                                id: 'loginPassword',\n                                type: 'password',\n                                className: 'form-control',\n                                ref: 'password',\n                                name: 'password',\n                                value: this.state.password,\n                                onChange: this.handlePasswordChange,\n                                placeholder: Utils.localizeMessage('login.password', 'Password'),\n                                spellCheck: 'false'\n                            })\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'form-group' },\n                            _react2.default.createElement(\n                                'button',\n                                {\n                                    id: 'loginButton',\n                                    type: 'submit',\n                                    className: 'btn btn-primary'\n                                },\n                                loginButton\n                            )\n                        )\n                    )\n                ));\n            }\n\n            if (global.window.mm_config.EnableOpenServer === 'true' && this.checkSignUpEnabled()) {\n                loginControls.push(_react2.default.createElement(\n                    'div',\n                    {\n                        className: 'form-group',\n                        key: 'signup'\n                    },\n                    _react2.default.createElement(\n                        'span',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'login.noAccount',\n                            defaultMessage: 'Don\\'t have an account? '\n                        }),\n                        _react2.default.createElement(\n                            _reactRouter.Link,\n                            {\n                                id: 'signup',\n                                to: '/signup_user_complete' + this.props.location.search,\n                                className: 'signup-team-login'\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'login.create',\n                                defaultMessage: 'Create one now'\n                            })\n                        )\n                    )\n                ));\n            }\n\n            if (usernameSigninEnabled || emailSigninEnabled) {\n                loginControls.push(_react2.default.createElement(\n                    'div',\n                    {\n                        key: 'forgotPassword',\n                        className: 'form-group'\n                    },\n                    _react2.default.createElement(\n                        _reactRouter.Link,\n                        { to: '/reset_password' },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'login.forgot',\n                            defaultMessage: 'I forgot my password'\n                        })\n                    )\n                ));\n            }\n\n            if ((emailSigninEnabled || usernameSigninEnabled || ldapEnabled) && (gitlabSigninEnabled || googleSigninEnabled || samlSigninEnabled || office365SigninEnabled)) {\n                loginControls.push(_react2.default.createElement(\n                    'div',\n                    {\n                        key: 'divider',\n                        className: 'or__container'\n                    },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'login.or',\n                        defaultMessage: 'or'\n                    })\n                ));\n\n                loginControls.push(_react2.default.createElement(\n                    'h5',\n                    { key: 'oauthHeader' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'login.signInWith',\n                        defaultMessage: 'Sign in with:'\n                    })\n                ));\n            }\n\n            if (gitlabSigninEnabled) {\n                loginControls.push(_react2.default.createElement(\n                    'a',\n                    {\n                        className: 'btn btn-custom-login gitlab',\n                        key: 'gitlab',\n                        href: _client.Client4.getOAuthRoute() + '/gitlab/login' + this.props.location.search\n                    },\n                    _react2.default.createElement(\n                        'span',\n                        null,\n                        _react2.default.createElement('span', { className: 'icon' }),\n                        _react2.default.createElement(\n                            'span',\n                            null,\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'login.gitlab',\n                                defaultMessage: 'GitLab'\n                            })\n                        )\n                    )\n                ));\n            }\n\n            if (googleSigninEnabled) {\n                loginControls.push(_react2.default.createElement(\n                    'a',\n                    {\n                        className: 'btn btn-custom-login google',\n                        key: 'google',\n                        href: _client.Client4.getOAuthRoute() + '/google/login' + this.props.location.search\n                    },\n                    _react2.default.createElement(\n                        'span',\n                        null,\n                        _react2.default.createElement('span', { className: 'icon' }),\n                        _react2.default.createElement(\n                            'span',\n                            null,\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'login.google',\n                                defaultMessage: 'Google Apps'\n                            })\n                        )\n                    )\n                ));\n            }\n\n            if (office365SigninEnabled) {\n                loginControls.push(_react2.default.createElement(\n                    'a',\n                    {\n                        className: 'btn btn-custom-login office365',\n                        key: 'office365',\n                        href: _client.Client4.getOAuthRoute() + '/office365/login' + this.props.location.search\n                    },\n                    _react2.default.createElement(\n                        'span',\n                        null,\n                        _react2.default.createElement('span', { className: 'icon' }),\n                        _react2.default.createElement(\n                            'span',\n                            null,\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'login.office365',\n                                defaultMessage: 'Office 365'\n                            })\n                        )\n                    )\n                ));\n            }\n\n            if (samlSigninEnabled) {\n                loginControls.push(_react2.default.createElement(\n                    'a',\n                    {\n                        className: 'btn btn-custom-login saml',\n                        key: 'saml',\n                        href: '/login/sso/saml' + this.props.location.search\n                    },\n                    _react2.default.createElement(\n                        'span',\n                        null,\n                        _react2.default.createElement('span', { className: 'icon fa fa-lock fa--margin-top' }),\n                        _react2.default.createElement(\n                            'span',\n                            null,\n                            global.window.mm_config.SamlLoginButtonText\n                        )\n                    )\n                ));\n            }\n\n            if (loginControls.length === 0) {\n                loginControls.push(_react2.default.createElement(_form_error2.default, {\n                    error: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'login.noMethods',\n                        defaultMessage: 'No sign-in methods are enabled. Please contact your System Administrator.'\n                    }),\n                    margin: true\n                }));\n            }\n\n            return _react2.default.createElement(\n                'div',\n                null,\n                extraBox,\n                loginControls\n            );\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var content = void 0;\n            var customContent = void 0;\n            var customClass = void 0;\n            if (this.state.showMfa) {\n                content = _react2.default.createElement(_login_mfa2.default, {\n                    loginId: this.state.loginId,\n                    password: this.state.password,\n                    submit: this.submit\n                });\n            } else {\n                content = this.createLoginOptions();\n                customContent = this.createCustomLogin();\n                if (customContent) {\n                    customClass = 'branded';\n                }\n            }\n\n            var description = null;\n            if (global.window.mm_license.IsLicensed === 'true' && global.window.mm_license.CustomBrand === 'true' && global.window.mm_config.EnableCustomBrand === 'true') {\n                description = global.window.mm_config.CustomDescriptionText;\n            } else {\n                description = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'web.root.signup_info',\n                    defaultMessage: 'All team communication in one place, searchable and accessible anywhere'\n                });\n            }\n\n            return _react2.default.createElement(\n                'div',\n                null,\n                _react2.default.createElement(_announcement_bar2.default, null),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'col-sm-12' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'signup-team__container ' + customClass },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'signup__markdown' },\n                            customContent\n                        ),\n                        _react2.default.createElement('img', {\n                            className: 'signup-team-logo',\n                            src: _logo2.default\n                        }),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'signup__content' },\n                            _react2.default.createElement(\n                                'h1',\n                                null,\n                                global.window.mm_config.SiteName\n                            ),\n                            _react2.default.createElement(\n                                'h4',\n                                { className: 'color--light' },\n                                description\n                            ),\n                            content\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n    return LoginController;\n}(_react2.default.Component); // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nexports.default = LoginController;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(23)))\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 39.1b2b002e633eb21333ff.js","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {browserHistory, Link} from 'react-router';\n\nimport {Client4} from 'mattermost-redux/client';\n\nimport * as GlobalActions from 'actions/global_actions.jsx';\nimport {addUserToTeamFromInvite} from 'actions/team_actions.jsx';\nimport {checkMfa, webLogin} from 'actions/user_actions.jsx';\nimport BrowserStore from 'stores/browser_store.jsx';\nimport UserStore from 'stores/user_store.jsx';\n\nimport Constants from 'utils/constants.jsx';\nimport * as TextFormatting from 'utils/text_formatting.jsx';\nimport * as Utils from 'utils/utils.jsx';\n\nimport logoImage from 'images/logo.png';\n\nimport AnnouncementBar from 'components/announcement_bar';\nimport FormError from 'components/form_error.jsx';\n\nimport LoginMfa from './components/login_mfa.jsx';\n\nexport default class LoginController extends React.Component {\n    static get propTypes() {\n        return {\n            location: PropTypes.object.isRequired,\n            params: PropTypes.object.isRequired\n        };\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.preSubmit = this.preSubmit.bind(this);\n        this.submit = this.submit.bind(this);\n        this.finishSignin = this.finishSignin.bind(this);\n\n        this.handleLoginIdChange = this.handleLoginIdChange.bind(this);\n        this.handlePasswordChange = this.handlePasswordChange.bind(this);\n\n        let loginId = '';\n        if (this.props.location.query.extra === Constants.SIGNIN_VERIFIED && this.props.location.query.email) {\n            loginId = this.props.location.query.email;\n        }\n\n        this.state = {\n            ldapEnabled: global.window.mm_license.IsLicensed === 'true' && global.window.mm_config.EnableLdap === 'true',\n            usernameSigninEnabled: global.window.mm_config.EnableSignInWithUsername === 'true',\n            emailSigninEnabled: global.window.mm_config.EnableSignInWithEmail === 'true',\n            samlEnabled: global.window.mm_license.IsLicensed === 'true' && global.window.mm_config.EnableSaml === 'true',\n            loginId,\n            password: '',\n            showMfa: false,\n            loading: false\n        };\n    }\n\n    componentDidMount() {\n        document.title = global.window.mm_config.SiteName;\n        BrowserStore.removeGlobalItem('team');\n        if (UserStore.getCurrentUser()) {\n            GlobalActions.redirectUserToDefaultTeam();\n        }\n\n        if (this.props.location.query.extra === Constants.SIGNIN_VERIFIED && this.props.location.query.email) {\n            this.refs.password.focus();\n        }\n    }\n\n    preSubmit(e) {\n        e.preventDefault();\n\n        const {location} = this.props;\n        const newQuery = location.search.replace(/(extra=password_change)&?/i, '');\n        if (newQuery !== location.search) {\n            browserHistory.replace(`${location.pathname}${newQuery}${location.hash}`);\n        }\n\n        // password managers don't always call onInput handlers for form fields so it's possible\n        // for the state to get out of sync with what the user sees in the browser\n        let loginId = this.refs.loginId.value;\n        if (loginId !== this.state.loginId) {\n            this.setState({loginId});\n        }\n\n        const password = this.refs.password.value;\n        if (password !== this.state.password) {\n            this.setState({password});\n        }\n\n        // don't trim the password since we support spaces in passwords\n        loginId = loginId.trim().toLowerCase();\n\n        if (!loginId) {\n            // it's slightly weird to be constructing the message ID, but it's a bit nicer than triply nested if statements\n            let msgId = 'login.no';\n            if (this.state.emailSigninEnabled) {\n                msgId += 'Email';\n            }\n            if (this.state.usernameSigninEnabled) {\n                msgId += 'Username';\n            }\n            if (this.state.ldapEnabled) {\n                msgId += 'LdapUsername';\n            }\n\n            this.setState({\n                serverError: (\n                    <FormattedMessage\n                        id={msgId}\n                        values={{\n                            ldapUsername: global.window.mm_config.LdapLoginFieldName || Utils.localizeMessage('login.ldapUsernameLower', 'AD/LDAP username')\n                        }}\n                    />\n                )\n            });\n            return;\n        }\n\n        if (!password) {\n            this.setState({\n                serverError: (\n                    <FormattedMessage\n                        id='login.noPassword'\n                        defaultMessage='Please enter your password'\n                    />\n                )\n            });\n            return;\n        }\n\n        checkMfa(\n            loginId,\n            (requiresMfa) => {\n                if (requiresMfa) {\n                    this.setState({showMfa: true});\n                } else {\n                    this.submit(loginId, password, '');\n                }\n            },\n            (err) => {\n                this.setState({serverError: err.message});\n            }\n        );\n    }\n\n    submit(loginId, password, token) {\n        this.setState({serverError: null, loading: true});\n\n        webLogin(\n            loginId,\n            password,\n            token,\n            () => {\n                // check for query params brought over from signup_user_complete\n                const hash = this.props.location.query.h;\n                const data = this.props.location.query.d;\n                const inviteId = this.props.location.query.id;\n                if (inviteId || hash) {\n                    addUserToTeamFromInvite(\n                        data,\n                        hash,\n                        inviteId,\n                        (team) => {\n                            this.finishSignin(team);\n                        },\n                        () => {\n                            // there's not really a good way to deal with this, so just let the user log in like normal\n                            this.finishSignin();\n                        }\n                    );\n\n                    return;\n                }\n\n                this.finishSignin();\n            },\n            (err) => {\n                if (err.id === 'api.user.login.not_verified.app_error') {\n                    browserHistory.push('/should_verify_email?&email=' + encodeURIComponent(loginId));\n                } else if (err.id === 'store.sql_user.get_for_login.app_error' ||\n                    err.id === 'ent.ldap.do_login.user_not_registered.app_error') {\n                    this.setState({\n                        showMfa: false,\n                        loading: false,\n                        serverError: (\n                            <FormattedMessage\n                                id='login.userNotFound'\n                                defaultMessage=\"We couldn't find an account matching your login credentials.\"\n                            />\n                        )\n                    });\n                } else if (err.id === 'api.user.check_user_password.invalid.app_error' || err.id === 'ent.ldap.do_login.invalid_password.app_error') {\n                    this.setState({\n                        showMfa: false,\n                        loading: false,\n                        serverError: (\n                            <FormattedMessage\n                                id='login.invalidPassword'\n                                defaultMessage='Your password is incorrect.'\n                            />\n                        )\n                    });\n                } else {\n                    this.setState({showMfa: false, serverError: err.message, loading: false});\n                }\n            }\n        );\n    }\n\n    finishSignin(team) {\n        const query = this.props.location.query;\n        GlobalActions.loadCurrentLocale();\n        if (query.redirect_to && query.redirect_to.match(/^\\/([^/]|$)/)) {\n            browserHistory.push(query.redirect_to);\n        } else if (team) {\n            browserHistory.push(`/${team.name}`);\n        } else {\n            GlobalActions.redirectUserToDefaultTeam();\n        }\n    }\n\n    handleLoginIdChange(e) {\n        this.setState({\n            loginId: e.target.value\n        });\n    }\n\n    handlePasswordChange(e) {\n        this.setState({\n            password: e.target.value\n        });\n    }\n\n    createCustomLogin() {\n        if (global.window.mm_license.IsLicensed === 'true' &&\n                global.window.mm_license.CustomBrand === 'true' &&\n                global.window.mm_config.EnableCustomBrand === 'true') {\n            const text = global.window.mm_config.CustomBrandText || '';\n\n            return (\n                <div>\n                    <img\n                        src={Client4.getBrandImageUrl(0)}\n                    />\n                    <p dangerouslySetInnerHTML={{__html: TextFormatting.formatText(text)}}/>\n                </div>\n            );\n        }\n\n        return null;\n    }\n\n    createLoginPlaceholder() {\n        const ldapEnabled = this.state.ldapEnabled;\n        const usernameSigninEnabled = this.state.usernameSigninEnabled;\n        const emailSigninEnabled = this.state.emailSigninEnabled;\n\n        const loginPlaceholders = [];\n        if (emailSigninEnabled) {\n            loginPlaceholders.push(Utils.localizeMessage('login.email', 'Email'));\n        }\n\n        if (usernameSigninEnabled) {\n            loginPlaceholders.push(Utils.localizeMessage('login.username', 'Username'));\n        }\n\n        if (ldapEnabled) {\n            if (global.window.mm_config.LdapLoginFieldName) {\n                loginPlaceholders.push(global.window.mm_config.LdapLoginFieldName);\n            } else {\n                loginPlaceholders.push(Utils.localizeMessage('login.ldapUsername', 'AD/LDAP Username'));\n            }\n        }\n\n        if (loginPlaceholders.length >= 2) {\n            return loginPlaceholders.slice(0, loginPlaceholders.length - 1).join(', ') +\n                Utils.localizeMessage('login.placeholderOr', ' or ') +\n                loginPlaceholders[loginPlaceholders.length - 1];\n        } else if (loginPlaceholders.length === 1) {\n            return loginPlaceholders[0];\n        }\n\n        return '';\n    }\n\n    checkSignUpEnabled() {\n        return global.window.mm_config.EnableSignUpWithEmail === 'true' ||\n            global.window.mm_config.EnableSignUpWithGitLab === 'true' ||\n            global.window.mm_config.EnableSignUpWithOffice365 === 'true' ||\n            global.window.mm_config.EnableSignUpWithGoogle === 'true' ||\n            global.window.mm_config.EnableLdap === 'true' ||\n            global.window.mm_config.EnableSaml === 'true';\n    }\n\n    createLoginOptions() {\n        const extraParam = this.props.location.query.extra;\n        let extraBox = '';\n        if (extraParam) {\n            if (extraParam === Constants.SIGNIN_CHANGE) {\n                extraBox = (\n                    <div className='alert alert-success'>\n                        <i className='fa fa-check'/>\n                        <FormattedMessage\n                            id='login.changed'\n                            defaultMessage=' Sign-in method changed successfully'\n                        />\n                    </div>\n                );\n            } else if (extraParam === Constants.SIGNIN_VERIFIED) {\n                extraBox = (\n                    <div className='alert alert-success'>\n                        <i className='fa fa-check'/>\n                        <FormattedMessage\n                            id='login.verified'\n                            defaultMessage=' Email Verified'\n                        />\n                    </div>\n                );\n            } else if (extraParam === Constants.SESSION_EXPIRED) {\n                extraBox = (\n                    <div className='alert alert-warning'>\n                        <i className='fa fa-exclamation-triangle'/>\n                        <FormattedMessage\n                            id='login.session_expired'\n                            defaultMessage=' Your session has expired. Please login again.'\n                        />\n                    </div>\n                );\n            } else if (extraParam === Constants.PASSWORD_CHANGE) {\n                extraBox = (\n                    <div className='alert alert-success'>\n                        <i className='fa fa-check'/>\n                        <FormattedMessage\n                            id='login.passwordChanged'\n                            defaultMessage=' Password updated successfully'\n                        />\n                    </div>\n                );\n            }\n        }\n\n        const loginControls = [];\n\n        const ldapEnabled = this.state.ldapEnabled;\n        const gitlabSigninEnabled = global.window.mm_config.EnableSignUpWithGitLab === 'true';\n        const googleSigninEnabled = global.window.mm_config.EnableSignUpWithGoogle === 'true';\n        const office365SigninEnabled = global.window.mm_config.EnableSignUpWithOffice365 === 'true';\n        const samlSigninEnabled = this.state.samlEnabled;\n        const usernameSigninEnabled = this.state.usernameSigninEnabled;\n        const emailSigninEnabled = this.state.emailSigninEnabled;\n\n        if (emailSigninEnabled || usernameSigninEnabled || ldapEnabled) {\n            let errorClass = '';\n            if (this.state.serverError) {\n                errorClass = ' has-error';\n            }\n\n            let loginButton =\n                (<FormattedMessage\n                    id='login.signIn'\n                    defaultMessage='Sign in'\n                 />);\n\n            if (this.state.loading) {\n                loginButton =\n                (<span>\n                    <span className='fa fa-refresh icon--rotate'/>\n                    <FormattedMessage\n                        id='login.signInLoading'\n                        defaultMessage='Signing in...'\n                    />\n                </span>);\n            }\n\n            loginControls.push(\n                <form\n                    key='loginBoxes'\n                    onSubmit={this.preSubmit}\n                >\n                    <div className='signup__email-container'>\n                        <FormError\n                            error={this.state.serverError}\n                            margin={true}\n                        />\n                        <div className={'form-group' + errorClass}>\n                            <input\n                                id='loginId'\n                                className='form-control'\n                                ref='loginId'\n                                name='loginId'\n                                value={this.state.loginId}\n                                onChange={this.handleLoginIdChange}\n                                placeholder={this.createLoginPlaceholder()}\n                                spellCheck='false'\n                                autoCapitalize='off'\n                            />\n                        </div>\n                        <div className={'form-group' + errorClass}>\n                            <input\n                                id='loginPassword'\n                                type='password'\n                                className='form-control'\n                                ref='password'\n                                name='password'\n                                value={this.state.password}\n                                onChange={this.handlePasswordChange}\n                                placeholder={Utils.localizeMessage('login.password', 'Password')}\n                                spellCheck='false'\n                            />\n                        </div>\n                        <div className='form-group'>\n                            <button\n                                id='loginButton'\n                                type='submit'\n                                className='btn btn-primary'\n                            >\n                                { loginButton }\n                            </button>\n                        </div>\n                    </div>\n                </form>\n            );\n        }\n\n        if (global.window.mm_config.EnableOpenServer === 'true' && this.checkSignUpEnabled()) {\n            loginControls.push(\n                <div\n                    className='form-group'\n                    key='signup'\n                >\n                    <span>\n                        <FormattedMessage\n                            id='login.noAccount'\n                            defaultMessage=\"Don't have an account? \"\n                        />\n                        <Link\n                            id='signup'\n                            to={'/signup_user_complete' + this.props.location.search}\n                            className='signup-team-login'\n                        >\n                            <FormattedMessage\n                                id='login.create'\n                                defaultMessage='Create one now'\n                            />\n                        </Link>\n                    </span>\n                </div>\n            );\n        }\n\n        if (usernameSigninEnabled || emailSigninEnabled) {\n            loginControls.push(\n                <div\n                    key='forgotPassword'\n                    className='form-group'\n                >\n                    <Link to={'/reset_password'}>\n                        <FormattedMessage\n                            id='login.forgot'\n                            defaultMessage='I forgot my password'\n                        />\n                    </Link>\n                </div>\n            );\n        }\n\n        if ((emailSigninEnabled || usernameSigninEnabled || ldapEnabled) && (gitlabSigninEnabled || googleSigninEnabled || samlSigninEnabled || office365SigninEnabled)) {\n            loginControls.push(\n                <div\n                    key='divider'\n                    className='or__container'\n                >\n                    <FormattedMessage\n                        id='login.or'\n                        defaultMessage='or'\n                    />\n                </div>\n            );\n\n            loginControls.push(\n                <h5 key='oauthHeader'>\n                    <FormattedMessage\n                        id='login.signInWith'\n                        defaultMessage='Sign in with:'\n                    />\n                </h5>\n            );\n        }\n\n        if (gitlabSigninEnabled) {\n            loginControls.push(\n                <a\n                    className='btn btn-custom-login gitlab'\n                    key='gitlab'\n                    href={Client4.getOAuthRoute() + '/gitlab/login' + this.props.location.search}\n                >\n                    <span>\n                        <span className='icon'/>\n                        <span>\n                            <FormattedMessage\n                                id='login.gitlab'\n                                defaultMessage='GitLab'\n                            />\n                        </span>\n                    </span>\n                </a>\n            );\n        }\n\n        if (googleSigninEnabled) {\n            loginControls.push(\n                <a\n                    className='btn btn-custom-login google'\n                    key='google'\n                    href={Client4.getOAuthRoute() + '/google/login' + this.props.location.search}\n                >\n                    <span>\n                        <span className='icon'/>\n                        <span>\n                            <FormattedMessage\n                                id='login.google'\n                                defaultMessage='Google Apps'\n                            />\n                        </span>\n                    </span>\n                </a>\n            );\n        }\n\n        if (office365SigninEnabled) {\n            loginControls.push(\n                <a\n                    className='btn btn-custom-login office365'\n                    key='office365'\n                    href={Client4.getOAuthRoute() + '/office365/login' + this.props.location.search}\n                >\n                    <span>\n                        <span className='icon'/>\n                        <span>\n                            <FormattedMessage\n                                id='login.office365'\n                                defaultMessage='Office 365'\n                            />\n                        </span>\n                    </span>\n                </a>\n            );\n        }\n\n        if (samlSigninEnabled) {\n            loginControls.push(\n                <a\n                    className='btn btn-custom-login saml'\n                    key='saml'\n                    href={'/login/sso/saml' + this.props.location.search}\n                >\n                    <span>\n                        <span className='icon fa fa-lock fa--margin-top'/>\n                        <span>\n                            {global.window.mm_config.SamlLoginButtonText}\n                        </span>\n                    </span>\n                </a>\n            );\n        }\n\n        if (loginControls.length === 0) {\n            loginControls.push(\n                <FormError\n                    error={\n                        <FormattedMessage\n                            id='login.noMethods'\n                            defaultMessage='No sign-in methods are enabled. Please contact your System Administrator.'\n                        />\n                    }\n                    margin={true}\n                />\n            );\n        }\n\n        return (\n            <div>\n                {extraBox}\n                {loginControls}\n            </div>\n        );\n    }\n\n    render() {\n        let content;\n        let customContent;\n        let customClass;\n        if (this.state.showMfa) {\n            content = (\n                <LoginMfa\n                    loginId={this.state.loginId}\n                    password={this.state.password}\n                    submit={this.submit}\n                />\n            );\n        } else {\n            content = this.createLoginOptions();\n            customContent = this.createCustomLogin();\n            if (customContent) {\n                customClass = 'branded';\n            }\n        }\n\n        let description = null;\n        if (global.window.mm_license.IsLicensed === 'true' && global.window.mm_license.CustomBrand === 'true' && global.window.mm_config.EnableCustomBrand === 'true') {\n            description = global.window.mm_config.CustomDescriptionText;\n        } else {\n            description = (\n                <FormattedMessage\n                    id='web.root.signup_info'\n                    defaultMessage='All team communication in one place, searchable and accessible anywhere'\n                />\n            );\n        }\n\n        return (\n            <div>\n                <AnnouncementBar/>\n                <div className='col-sm-12'>\n                    <div className={'signup-team__container ' + customClass}>\n                        <div className='signup__markdown'>\n                            {customContent}\n                        </div>\n                        <img\n                            className='signup-team-logo'\n                            src={logoImage}\n                        />\n                        <div className='signup__content'>\n                            <h1>{global.window.mm_config.SiteName}</h1>\n                            <h4 className='color--light'>\n                                {description}\n                            </h4>\n                            {content}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./components/login/login_controller.jsx"],"sourceRoot":""}