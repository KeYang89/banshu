{"version":3,"sources":["webpack:///40.0242c9dea7f0889d7024.js","webpack:///./components/logged_in.jsx"],"names":["webpackJsonp","2018","module","exports","__webpack_require__","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","call","default","_interopRequireDefault","defineProperty","value","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_jquery","_jquery2","_propTypes","_propTypes2","_react","_react2","_emoji_actions","_global_actions","GlobalActions","_websocket_actions","WebSocketActions","_user_store","_user_store2","_user_agent","UserAgent","_utils","Utils","_loading_screen","_loading_screen2","LoggedIn","_React$Component","params","this","_this","__proto__","onUserChanged","bind","state","user","getCurrentUser","document","getElementById","className","areObjectsEqual","setState","initialize","addChangeListener","window","addEventListener","onFocusListener","onBlurListener","isIos","addClass","isAndroid","attr","emitUserLoggedOutEvent","on","ev","type","parent","prev","next","removeClass","closest","find","e","which","target","is","preventDefault","mm_config","EnableCustomEmoji","loadEmoji","close","removeChangeListener","off","removeEventListener","isValidState","cloneElement","props","children","createElement","emitBrowserFocus","Component","propTypes","object"],"mappings":"AAAAA,cAAc,KAERC,KACA,SAAUC,EAAQC,EAASC,GAEjC,YAmEA,SAASC,GAAwBC,GAAO,GAAIA,GAAOA,EAAIC,WAAc,MAAOD,EAAc,IAAIE,KAAa,IAAW,MAAPF,EAAe,IAAK,GAAIG,KAAOH,GAAWI,OAAOC,UAAUC,eAAeC,KAAKP,EAAKG,KAAMD,EAAOC,GAAOH,EAAIG,GAAgC,OAAtBD,GAAOM,QAAUR,EAAYE,EAElQ,QAASO,GAAuBT,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,QAASR,GAlEvFI,OAAOM,eAAeb,EAAS,cAC3Bc,OAAO,GAGX,IAAIC,GAAkBd,EAAoB,GAEtCe,EAAmBJ,EAAuBG,GAE1CE,EAAmBhB,EAAoB,GAEvCiB,EAAmBN,EAAuBK,GAE1CE,EAAgBlB,EAAoB,GAEpCmB,EAAgBR,EAAuBO,GAEvCE,EAA8BpB,EAAoB,GAElDqB,EAA8BV,EAAuBS,GAErDE,EAAatB,EAAoB,GAEjCuB,EAAaZ,EAAuBW,GC3BxCE,EAAAxB,EAAA,GD+BIyB,EAAWd,EAAuBa,GC7BtCE,EAAA1B,EAAA,GDiCI2B,EAAchB,EAAuBe,GChCzCE,EAAA5B,EAAA,GDoCI6B,EAAUlB,EAAuBiB,GClCrCE,EAAA9B,EAAA,MACA+B,EAAA/B,EAAA,IAAYgC,EDuCQ/B,EAAwB8B,GCtC5CE,EAAAjC,EAAA,KAAYkC,ED0CWjC,EAAwBgC,ECzC/CjC,GAAA,IACA,IAAAmC,GAAAnC,EAAA,ID8CIoC,EAAezB,EAAuBwB,GC5C1CE,EAAArC,EAAA,IAAYsC,EDgDIrC,EAAwBoC,GC/CxCE,EAAAvC,EAAA,IAAYwC,EDmDAvC,EAAwBsC,GCjDpCE,EAAAzC,EAAA,KDqDI0C,EAAmB/B,EAAuB8B,GCjDzBE,ED0DN,SAAUC,GCzDrB,QAAAD,GAAYE,IAAQ,EAAA5B,EAAAP,SAAAoC,KAAAH,EAAA,IAAAI,IAAA,EAAA1B,EAAAX,SAAAoC,MAAAH,EAAAK,YAAA,EAAAjC,EAAAL,SAAAiC,IAAAlC,KAAAqC,KACVD,GADU,OAGhBE,GAAKE,cAAgBF,EAAKE,cAAcC,KAAnBH,GAErBA,EAAKI,OACDC,KAAMhB,EAAA1B,QAAU2C,kBAEpBC,SAASC,eAAe,QAAQC,WAAa,gBAR7BT,EDuMpB,OA7IA,EAAIxB,EAAWb,SAASiC,EAAUC,IAgBlC,EAAIzB,EAAcT,SAASiC,IACvBtC,IAAK,eACLQ,MAAO,WChEP,MAA0B,OAAnBiC,KAAKK,MAAMC,QDoElB/C,IAAK,gBACLQ,MAAO,WChEP,GAAMuC,GAAOhB,EAAA1B,QAAU2C,gBAClBb,GAAMiB,gBAAgBX,KAAKK,MAAMC,KAAMA,IACxCN,KAAKY,UACDN,YDuER/C,IAAK,oBACLQ,MAAO,WCjEPqB,EAAiByB,aAGjBvB,EAAA1B,QAAUkD,kBAAkBd,KAAKG,eAGjCY,OAAOC,iBAAiB,QAAShB,KAAKiB,iBACtCF,OAAOC,iBAAiB,OAAQhB,KAAKkB,gBAKjC1B,EAAU2B,SACV,EAAAxC,EAAAf,SAAE,QAAQwD,SAAS,OACZ5B,EAAU6B,cACjB,EAAA1C,EAAAf,SAAE,QAAQwD,SAAS,WAGlBpB,KAAKK,MAAMC,QACZ,EAAA3B,EAAAf,SAAE,SAAS0D,KAAK,QAAS,IACzBpC,EAAcqC,uBAAuB,YAGzC,EAAA5C,EAAAf,SAAE,QAAQ4D,GAAG,wBAAyB,QAAS,SAAmBC,GAC9C,eAAZA,EAAGC,OACH,EAAA/C,EAAAf,SAAEoC,MAAM2B,OAAO,OAAOC,KAAK,mCAAmCR,SAAS,mBACvE,EAAAzC,EAAAf,SAAEoC,MAAM2B,OAAO,OAAOE,KAAK,mCAAmCT,SAAS,sBAEvE,EAAAzC,EAAAf,SAAEoC,MAAM2B,OAAO,OAAOC,KAAK,mCAAmCE,YAAY,mBAC1E,EAAAnD,EAAAf,SAAEoC,MAAM2B,OAAO,OAAOE,KAAK,mCAAmCC,YAAY,uBAIlF,EAAAnD,EAAAf,SAAE,QAAQ4D,GAAG,wBAAyB,gCAAiC,SAAmBC,GACtE,eAAZA,EAAGC,OACH,EAAA/C,EAAAf,SAAEoC,MAAM+B,QAAQ,2BAA2BC,KAAK,mBAAmBZ,SAAS,mBAC5E,EAAAzC,EAAAf,SAAEoC,MAAM+B,QAAQ,2BAA2BF,KAAK,OAAOG,KAAK,mBAAmBZ,SAAS,sBAExF,EAAAzC,EAAAf,SAAEoC,MAAM+B,QAAQ,2BAA2BC,KAAK,mBAAmBF,YAAY,mBAC/E,EAAAnD,EAAAf,SAAEoC,MAAM+B,QAAQ,2BAA2BF,KAAK,OAAOG,KAAK,mBAAmBF,YAAY,uBAInG,EAAAnD,EAAAf,SAAE,QAAQ4D,GAAG,wBAAyB,iCAAkC,SAAmBC,GACvE,eAAZA,EAAGC,OACH,EAAA/C,EAAAf,SAAEoC,MAAM2B,OAAO,OAAOC,KAAK,mCAAmCR,SAAS,qBACvE,EAAAzC,EAAAf,SAAEoC,MAAM2B,OAAO,OAAOE,KAAK,mCAAmCT,SAAS,uBAEvE,EAAAzC,EAAAf,SAAEoC,MAAM2B,OAAO,OAAOC,KAAK,mCAAmCE,YAAY,qBAC1E,EAAAnD,EAAAf,SAAEoC,MAAM2B,OAAO,OAAOE,KAAK,mCAAmCC,YAAY,wBAKlF,EAAAnD,EAAAf,SAAEmD,QAAQS,GAAG,2BAA4B,SAACS,GApF3B,IAqFPA,EAAEC,QAA6B,EAAAvD,EAAAf,SAAEqE,EAAEE,QAAQC,GAAG,oBAC9CH,EAAEI,mBAKiC,SAAvCtB,OAAOuB,UAAUC,oBACjB,EAAAvD,EAAAwD,YAAU,MDuEdjF,IAAK,uBACLQ,MAAO,WCnEPqB,EAAiBqD,QACjBnD,EAAA1B,QAAU8E,qBAAqB1C,KAAKG,gBAEpC,EAAAxB,EAAAf,SAAE,QAAQ+E,IAAI,sBACd,EAAAhE,EAAAf,SAAE,QAAQ+E,IAAI,wBAAyB,UACvC,EAAAhE,EAAAf,SAAE,QAAQ+E,IAAI,wBAAyB,mCAEvC,EAAAhE,EAAAf,SAAE,UAAU+E,IAAI,kBAEhB,EAAAhE,EAAAf,SAAEmD,QAAQ4B,IAAI,4BAGd5B,OAAO6B,oBAAoB,QAAS5C,KAAKiB,iBACzCF,OAAO6B,oBAAoB,OAAQ5C,KAAKkB,mBDuExC3D,IAAK,SACLQ,MAAO,WCpEP,MAAKiC,MAAK6C,eAIH9D,EAAAnB,QAAMkF,aAAa9C,KAAK+C,MAAMC,UACjC1C,KAAMN,KAAKK,MAAMC,OAJVvB,EAAAnB,QAAAqF,cAAArD,EAAAhC,QAAA,SD6EXL,IAAK,kBACLQ,MAAO,WCrEPmB,EAAcgE,kBAAiB,MDyE/B3F,IAAK,iBACLQ,MAAO,WCtEPmB,EAAcgE,kBAAiB,OD0E5BrD,GCxM2Bd,EAAAnB,QAAMuF,UD2M5ClG,GAAQW,QC3MaiC,EAkIrBA,EAASuD,WACLJ,SAAUnE,EAAAjB,QAAUyF","file":"40.0242c9dea7f0889d7024.js","sourcesContent":["webpackJsonp([40],{\n\n/***/ 2018:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(5);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(3);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(4);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(6);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(7);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _propTypes = __webpack_require__(8);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _emoji_actions = __webpack_require__(1957);\n\nvar _global_actions = __webpack_require__(56);\n\nvar GlobalActions = _interopRequireWildcard(_global_actions);\n\nvar _websocket_actions = __webpack_require__(286);\n\nvar WebSocketActions = _interopRequireWildcard(_websocket_actions);\n\n__webpack_require__(127);\n\nvar _user_store = __webpack_require__(27);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _user_agent = __webpack_require__(73);\n\nvar UserAgent = _interopRequireWildcard(_user_agent);\n\nvar _utils = __webpack_require__(16);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _loading_screen = __webpack_require__(214);\n\nvar _loading_screen2 = _interopRequireDefault(_loading_screen);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar BACKSPACE_CHAR = 8; // Copyright (c) 2016-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar LoggedIn = function (_React$Component) {\n    (0, _inherits3.default)(LoggedIn, _React$Component);\n\n    function LoggedIn(params) {\n        (0, _classCallCheck3.default)(this, LoggedIn);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (LoggedIn.__proto__ || (0, _getPrototypeOf2.default)(LoggedIn)).call(this, params));\n\n        _this.onUserChanged = _this.onUserChanged.bind(_this);\n\n        _this.state = {\n            user: _user_store2.default.getCurrentUser()\n        };\n        document.getElementById('root').className += ' channel-view';\n        return _this;\n    }\n\n    (0, _createClass3.default)(LoggedIn, [{\n        key: 'isValidState',\n        value: function isValidState() {\n            return this.state.user != null;\n        }\n    }, {\n        key: 'onUserChanged',\n        value: function onUserChanged() {\n            // Grab the current user\n            var user = _user_store2.default.getCurrentUser();\n            if (!Utils.areObjectsEqual(this.state.user, user)) {\n                this.setState({\n                    user: user\n                });\n            }\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            // Initialize websocket\n            WebSocketActions.initialize();\n\n            // Listen for user\n            _user_store2.default.addChangeListener(this.onUserChanged);\n\n            // Listen for focused tab/window state\n            window.addEventListener('focus', this.onFocusListener);\n            window.addEventListener('blur', this.onBlurListener);\n\n            // Because current CSS requires the root tag to have specific stuff\n\n            // Device tracking setup\n            if (UserAgent.isIos()) {\n                (0, _jquery2.default)('body').addClass('ios');\n            } else if (UserAgent.isAndroid()) {\n                (0, _jquery2.default)('body').addClass('android');\n            }\n\n            if (!this.state.user) {\n                (0, _jquery2.default)('#root').attr('class', '');\n                GlobalActions.emitUserLoggedOutEvent('/login');\n            }\n\n            (0, _jquery2.default)('body').on('mouseenter mouseleave', '.post', function mouseOver(ev) {\n                if (ev.type === 'mouseenter') {\n                    (0, _jquery2.default)(this).parent('div').prev('.date-separator, .new-separator').addClass('hovered--after');\n                    (0, _jquery2.default)(this).parent('div').next('.date-separator, .new-separator').addClass('hovered--before');\n                } else {\n                    (0, _jquery2.default)(this).parent('div').prev('.date-separator, .new-separator').removeClass('hovered--after');\n                    (0, _jquery2.default)(this).parent('div').next('.date-separator, .new-separator').removeClass('hovered--before');\n                }\n            });\n\n            (0, _jquery2.default)('body').on('mouseenter mouseleave', '.search-item__container .post', function mouseOver(ev) {\n                if (ev.type === 'mouseenter') {\n                    (0, _jquery2.default)(this).closest('.search-item__container').find('.date-separator').addClass('hovered--after');\n                    (0, _jquery2.default)(this).closest('.search-item__container').next('div').find('.date-separator').addClass('hovered--before');\n                } else {\n                    (0, _jquery2.default)(this).closest('.search-item__container').find('.date-separator').removeClass('hovered--after');\n                    (0, _jquery2.default)(this).closest('.search-item__container').next('div').find('.date-separator').removeClass('hovered--before');\n                }\n            });\n\n            (0, _jquery2.default)('body').on('mouseenter mouseleave', '.post.post--comment.same--root', function mouseOver(ev) {\n                if (ev.type === 'mouseenter') {\n                    (0, _jquery2.default)(this).parent('div').prev('.date-separator, .new-separator').addClass('hovered--comment');\n                    (0, _jquery2.default)(this).parent('div').next('.date-separator, .new-separator').addClass('hovered--comment');\n                } else {\n                    (0, _jquery2.default)(this).parent('div').prev('.date-separator, .new-separator').removeClass('hovered--comment');\n                    (0, _jquery2.default)(this).parent('div').next('.date-separator, .new-separator').removeClass('hovered--comment');\n                }\n            });\n\n            // Prevent backspace from navigating back a page\n            (0, _jquery2.default)(window).on('keydown.preventBackspace', function (e) {\n                if (e.which === BACKSPACE_CHAR && !(0, _jquery2.default)(e.target).is('input, textarea')) {\n                    e.preventDefault();\n                }\n            });\n\n            // Get custom emoji from the server\n            if (window.mm_config.EnableCustomEmoji === 'true') {\n                (0, _emoji_actions.loadEmoji)(false);\n            }\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            WebSocketActions.close();\n            _user_store2.default.removeChangeListener(this.onUserChanged);\n\n            (0, _jquery2.default)('body').off('click.userpopover');\n            (0, _jquery2.default)('body').off('mouseenter mouseleave', '.post');\n            (0, _jquery2.default)('body').off('mouseenter mouseleave', '.post.post--comment.same--root');\n\n            (0, _jquery2.default)('.modal').off('show.bs.modal');\n\n            (0, _jquery2.default)(window).off('keydown.preventBackspace');\n\n            // Listen for focussed tab/window state\n            window.removeEventListener('focus', this.onFocusListener);\n            window.removeEventListener('blur', this.onBlurListener);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            if (!this.isValidState()) {\n                return _react2.default.createElement(_loading_screen2.default, null);\n            }\n\n            return _react2.default.cloneElement(this.props.children, {\n                user: this.state.user\n            });\n        }\n    }, {\n        key: 'onFocusListener',\n        value: function onFocusListener() {\n            GlobalActions.emitBrowserFocus(true);\n        }\n    }, {\n        key: 'onBlurListener',\n        value: function onBlurListener() {\n            GlobalActions.emitBrowserFocus(false);\n        }\n    }]);\n    return LoggedIn;\n}(_react2.default.Component);\n\nexports.default = LoggedIn;\n\n\nLoggedIn.propTypes = {\n    children: _propTypes2.default.object\n};\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 40.0242c9dea7f0889d7024.js","// Copyright (c) 2016-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nimport $ from 'jquery';\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport {loadEmoji} from 'actions/emoji_actions.jsx';\nimport * as GlobalActions from 'actions/global_actions.jsx';\nimport * as WebSocketActions from 'actions/websocket_actions.jsx';\nimport 'stores/emoji_store.jsx';\nimport UserStore from 'stores/user_store.jsx';\n\nimport * as UserAgent from 'utils/user_agent.jsx';\nimport * as Utils from 'utils/utils.jsx';\n\nimport LoadingScreen from 'components/loading_screen.jsx';\n\nconst BACKSPACE_CHAR = 8;\n\nexport default class LoggedIn extends React.Component {\n    constructor(params) {\n        super(params);\n\n        this.onUserChanged = this.onUserChanged.bind(this);\n\n        this.state = {\n            user: UserStore.getCurrentUser()\n        };\n        document.getElementById('root').className += ' channel-view';\n    }\n\n    isValidState() {\n        return this.state.user != null;\n    }\n\n    onUserChanged() {\n        // Grab the current user\n        const user = UserStore.getCurrentUser();\n        if (!Utils.areObjectsEqual(this.state.user, user)) {\n            this.setState({\n                user\n            });\n        }\n    }\n\n    componentDidMount() {\n        // Initialize websocket\n        WebSocketActions.initialize();\n\n        // Listen for user\n        UserStore.addChangeListener(this.onUserChanged);\n\n        // Listen for focused tab/window state\n        window.addEventListener('focus', this.onFocusListener);\n        window.addEventListener('blur', this.onBlurListener);\n\n        // Because current CSS requires the root tag to have specific stuff\n\n        // Device tracking setup\n        if (UserAgent.isIos()) {\n            $('body').addClass('ios');\n        } else if (UserAgent.isAndroid()) {\n            $('body').addClass('android');\n        }\n\n        if (!this.state.user) {\n            $('#root').attr('class', '');\n            GlobalActions.emitUserLoggedOutEvent('/login');\n        }\n\n        $('body').on('mouseenter mouseleave', '.post', function mouseOver(ev) {\n            if (ev.type === 'mouseenter') {\n                $(this).parent('div').prev('.date-separator, .new-separator').addClass('hovered--after');\n                $(this).parent('div').next('.date-separator, .new-separator').addClass('hovered--before');\n            } else {\n                $(this).parent('div').prev('.date-separator, .new-separator').removeClass('hovered--after');\n                $(this).parent('div').next('.date-separator, .new-separator').removeClass('hovered--before');\n            }\n        });\n\n        $('body').on('mouseenter mouseleave', '.search-item__container .post', function mouseOver(ev) {\n            if (ev.type === 'mouseenter') {\n                $(this).closest('.search-item__container').find('.date-separator').addClass('hovered--after');\n                $(this).closest('.search-item__container').next('div').find('.date-separator').addClass('hovered--before');\n            } else {\n                $(this).closest('.search-item__container').find('.date-separator').removeClass('hovered--after');\n                $(this).closest('.search-item__container').next('div').find('.date-separator').removeClass('hovered--before');\n            }\n        });\n\n        $('body').on('mouseenter mouseleave', '.post.post--comment.same--root', function mouseOver(ev) {\n            if (ev.type === 'mouseenter') {\n                $(this).parent('div').prev('.date-separator, .new-separator').addClass('hovered--comment');\n                $(this).parent('div').next('.date-separator, .new-separator').addClass('hovered--comment');\n            } else {\n                $(this).parent('div').prev('.date-separator, .new-separator').removeClass('hovered--comment');\n                $(this).parent('div').next('.date-separator, .new-separator').removeClass('hovered--comment');\n            }\n        });\n\n        // Prevent backspace from navigating back a page\n        $(window).on('keydown.preventBackspace', (e) => {\n            if (e.which === BACKSPACE_CHAR && !$(e.target).is('input, textarea')) {\n                e.preventDefault();\n            }\n        });\n\n        // Get custom emoji from the server\n        if (window.mm_config.EnableCustomEmoji === 'true') {\n            loadEmoji(false);\n        }\n    }\n\n    componentWillUnmount() {\n        WebSocketActions.close();\n        UserStore.removeChangeListener(this.onUserChanged);\n\n        $('body').off('click.userpopover');\n        $('body').off('mouseenter mouseleave', '.post');\n        $('body').off('mouseenter mouseleave', '.post.post--comment.same--root');\n\n        $('.modal').off('show.bs.modal');\n\n        $(window).off('keydown.preventBackspace');\n\n        // Listen for focussed tab/window state\n        window.removeEventListener('focus', this.onFocusListener);\n        window.removeEventListener('blur', this.onBlurListener);\n    }\n\n    render() {\n        if (!this.isValidState()) {\n            return <LoadingScreen/>;\n        }\n\n        return React.cloneElement(this.props.children, {\n            user: this.state.user\n        });\n    }\n\n    onFocusListener() {\n        GlobalActions.emitBrowserFocus(true);\n    }\n\n    onBlurListener() {\n        GlobalActions.emitBrowserFocus(false);\n    }\n}\n\nLoggedIn.propTypes = {\n    children: PropTypes.object\n};\n\n\n\n// WEBPACK FOOTER //\n// ./components/logged_in.jsx"],"sourceRoot":""}