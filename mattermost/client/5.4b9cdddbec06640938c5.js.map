{"version":3,"sources":["webpack:///5.4b9cdddbec06640938c5.js","webpack:///./components/channel_view.jsx"],"names":["webpackJsonp","708","module","exports","__webpack_require__","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","call","default","_interopRequireDefault","defineProperty","value","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_jquery","_jquery2","_propTypes","_propTypes2","_react","_react2","_reactIntl","_channel_store","_channel_store2","_preference_store","_preference_store2","_user_store","_user_store2","_constants","_constants2","_user_agent","UserAgent","_utils","Utils","_channel_header","_channel_header2","_create_post","_create_post2","_file_upload_overlay","_file_upload_overlay2","_post_view","_post_view2","_tutorial_view","_tutorial_view2","TutorialSteps","Preferences","ChannelView","_React$Component","props","this","_this","__proto__","getChannelView","refs","channelView","getStateFromStores","bind","isStateValid","updateState","state","channelId","getCurrentId","tutorialStep","getInt","TUTORIAL_STEP","setState","addChangeListener","addClass","isInternetExplorer","isEdge","removeChangeListener","removeClass","nextProps","nextState","areObjectsEqual","params","INTRO_SCREENS","createElement","isRoot","createPost","className","id","channel","get","type","DM_CHANNEL","teammate","getDirectTeammate","delete_at","FormattedMessage","defaultMessage","ref","overlayType","Component","defaultProps","propTypes","object","isRequired"],"mappings":"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","file":"5.4b9cdddbec06640938c5.js","sourcesContent":["webpackJsonp([5],{\n\n/***/ 708:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(5);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(3);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(4);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(6);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(7);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _propTypes = __webpack_require__(8);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(17);\n\nvar _channel_store = __webpack_require__(31);\n\nvar _channel_store2 = _interopRequireDefault(_channel_store);\n\nvar _preference_store = __webpack_require__(113);\n\nvar _preference_store2 = _interopRequireDefault(_preference_store);\n\nvar _user_store = __webpack_require__(27);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _constants = __webpack_require__(9);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _user_agent = __webpack_require__(73);\n\nvar UserAgent = _interopRequireWildcard(_user_agent);\n\nvar _utils = __webpack_require__(16);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _channel_header = __webpack_require__(1968);\n\nvar _channel_header2 = _interopRequireDefault(_channel_header);\n\nvar _create_post = __webpack_require__(1964);\n\nvar _create_post2 = _interopRequireDefault(_create_post);\n\nvar _file_upload_overlay = __webpack_require__(1963);\n\nvar _file_upload_overlay2 = _interopRequireDefault(_file_upload_overlay);\n\nvar _post_view = __webpack_require__(1969);\n\nvar _post_view2 = _interopRequireDefault(_post_view);\n\nvar _tutorial_view = __webpack_require__(710);\n\nvar _tutorial_view2 = _interopRequireDefault(_tutorial_view);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar TutorialSteps = _constants2.default.TutorialSteps; // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar Preferences = _constants2.default.Preferences;\n\nvar ChannelView = function (_React$Component) {\n    (0, _inherits3.default)(ChannelView, _React$Component);\n\n    function ChannelView(props) {\n        (0, _classCallCheck3.default)(this, ChannelView);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (ChannelView.__proto__ || (0, _getPrototypeOf2.default)(ChannelView)).call(this, props));\n\n        _this.getChannelView = function () {\n            return _this.refs.channelView;\n        };\n\n        _this.getStateFromStores = _this.getStateFromStores.bind(_this);\n        _this.isStateValid = _this.isStateValid.bind(_this);\n        _this.updateState = _this.updateState.bind(_this);\n\n        _this.state = _this.getStateFromStores(props);\n        return _this;\n    }\n\n    (0, _createClass3.default)(ChannelView, [{\n        key: 'getStateFromStores',\n        value: function getStateFromStores() {\n            return {\n                channelId: _channel_store2.default.getCurrentId(),\n                tutorialStep: _preference_store2.default.getInt(Preferences.TUTORIAL_STEP, _user_store2.default.getCurrentId(), 999)\n            };\n        }\n    }, {\n        key: 'isStateValid',\n        value: function isStateValid() {\n            return this.state.channelId !== '';\n        }\n    }, {\n        key: 'updateState',\n        value: function updateState() {\n            this.setState(this.getStateFromStores(this.props));\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _channel_store2.default.addChangeListener(this.updateState);\n\n            (0, _jquery2.default)('body').addClass('app__body');\n\n            // IE Detection\n            if (UserAgent.isInternetExplorer() || UserAgent.isEdge()) {\n                (0, _jquery2.default)('body').addClass('browser--ie');\n            }\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _channel_store2.default.removeChangeListener(this.updateState);\n\n            (0, _jquery2.default)('body').removeClass('app__body');\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            this.setState(this.getStateFromStores(nextProps));\n        }\n    }, {\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps, nextState) {\n            if (!Utils.areObjectsEqual(nextProps.params, this.props.params)) {\n                return true;\n            }\n\n            if (nextState.channelId !== this.state.channelId) {\n                return true;\n            }\n\n            return false;\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            if (this.state.tutorialStep <= TutorialSteps.INTRO_SCREENS) {\n                return _react2.default.createElement(_tutorial_view2.default, {\n                    isRoot: false\n                });\n            }\n\n            var createPost = _react2.default.createElement(\n                'div',\n                {\n                    className: 'post-create__container',\n                    id: 'post-create'\n                },\n                _react2.default.createElement(_create_post2.default, {\n                    getChannelView: this.getChannelView\n                })\n            );\n            var channel = _channel_store2.default.get(this.state.channelId);\n            if (channel && channel.type === _constants2.default.DM_CHANNEL) {\n                var teammate = Utils.getDirectTeammate(channel.id);\n                if (teammate && teammate.delete_at) {\n                    createPost = _react2.default.createElement(\n                        'div',\n                        {\n                            className: 'post-create-message'\n                        },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'create_post.deactivated',\n                            defaultMessage: 'You are viewing an archived channel with a deactivated user.'\n                        })\n                    );\n                }\n            }\n\n            return _react2.default.createElement(\n                'div',\n                {\n                    ref: 'channelView',\n                    id: 'app-content',\n                    className: 'app__content'\n                },\n                _react2.default.createElement(_file_upload_overlay2.default, { overlayType: 'center' }),\n                _react2.default.createElement(_channel_header2.default, {\n                    channelId: this.state.channelId\n                }),\n                _react2.default.createElement(_post_view2.default, {\n                    channelId: this.state.channelId\n                }),\n                createPost\n            );\n        }\n    }]);\n    return ChannelView;\n}(_react2.default.Component);\n\nexports.default = ChannelView;\n\nChannelView.defaultProps = {};\n\nChannelView.propTypes = {\n    params: _propTypes2.default.object.isRequired\n};\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 5.4b9cdddbec06640938c5.js","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nimport $ from 'jquery';\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport ChannelStore from 'stores/channel_store.jsx';\nimport PreferenceStore from 'stores/preference_store.jsx';\nimport UserStore from 'stores/user_store.jsx';\n\nimport Constants from 'utils/constants.jsx';\nimport * as UserAgent from 'utils/user_agent.jsx';\nimport * as Utils from 'utils/utils.jsx';\n\nimport ChannelHeader from 'components/channel_header';\nimport CreatePost from 'components/create_post.jsx';\nimport FileUploadOverlay from 'components/file_upload_overlay.jsx';\nimport PostView from 'components/post_view';\nimport TutorialView from 'components/tutorial/tutorial_view.jsx';\n\nconst TutorialSteps = Constants.TutorialSteps;\nconst Preferences = Constants.Preferences;\n\nexport default class ChannelView extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.getStateFromStores = this.getStateFromStores.bind(this);\n        this.isStateValid = this.isStateValid.bind(this);\n        this.updateState = this.updateState.bind(this);\n\n        this.state = this.getStateFromStores(props);\n    }\n\n    getStateFromStores() {\n        return {\n            channelId: ChannelStore.getCurrentId(),\n            tutorialStep: PreferenceStore.getInt(Preferences.TUTORIAL_STEP, UserStore.getCurrentId(), 999)\n        };\n    }\n\n    isStateValid() {\n        return this.state.channelId !== '';\n    }\n\n    updateState() {\n        this.setState(this.getStateFromStores(this.props));\n    }\n\n    componentDidMount() {\n        ChannelStore.addChangeListener(this.updateState);\n\n        $('body').addClass('app__body');\n\n        // IE Detection\n        if (UserAgent.isInternetExplorer() || UserAgent.isEdge()) {\n            $('body').addClass('browser--ie');\n        }\n    }\n\n    componentWillUnmount() {\n        ChannelStore.removeChangeListener(this.updateState);\n\n        $('body').removeClass('app__body');\n    }\n\n    componentWillReceiveProps(nextProps) {\n        this.setState(this.getStateFromStores(nextProps));\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (!Utils.areObjectsEqual(nextProps.params, this.props.params)) {\n            return true;\n        }\n\n        if (nextState.channelId !== this.state.channelId) {\n            return true;\n        }\n\n        return false;\n    }\n\n    getChannelView = () => {\n        return this.refs.channelView;\n    }\n\n    render() {\n        if (this.state.tutorialStep <= TutorialSteps.INTRO_SCREENS) {\n            return (\n                <TutorialView\n                    isRoot={false}\n                />\n            );\n        }\n\n        let createPost = (\n            <div\n                className='post-create__container'\n                id='post-create'\n            >\n                <CreatePost\n                    getChannelView={this.getChannelView}\n                />\n            </div>\n        );\n        const channel = ChannelStore.get(this.state.channelId);\n        if (channel && channel.type === Constants.DM_CHANNEL) {\n            const teammate = Utils.getDirectTeammate(channel.id);\n            if (teammate && teammate.delete_at) {\n                createPost = (\n                    <div\n                        className='post-create-message'\n                    >\n                        <FormattedMessage\n                            id='create_post.deactivated'\n                            defaultMessage='You are viewing an archived channel with a deactivated user.'\n                        />\n                    </div>\n                );\n            }\n        }\n\n        return (\n            <div\n                ref='channelView'\n                id='app-content'\n                className='app__content'\n            >\n                <FileUploadOverlay overlayType='center'/>\n                <ChannelHeader\n                    channelId={this.state.channelId}\n                />\n                <PostView\n                    channelId={this.state.channelId}\n                />\n                {createPost}\n            </div>\n        );\n    }\n}\nChannelView.defaultProps = {\n};\n\nChannelView.propTypes = {\n    params: PropTypes.object.isRequired\n};\n\n\n\n// WEBPACK FOOTER //\n// ./components/channel_view.jsx"],"sourceRoot":""}