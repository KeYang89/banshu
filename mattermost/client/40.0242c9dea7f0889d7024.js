webpackJsonp([40],{2018:function(e,t,a){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(5),n=r(s),d=a(3),u=r(d),i=a(4),l=r(i),f=a(6),c=r(f),p=a(7),v=r(p),m=a(0),h=r(m),w=a(8),y=r(w),C=a(1),b=r(C),_=a(1957),g=a(56),k=o(g),L=a(286),E=o(L);a(127);var U=a(27),B=r(U),x=a(73),j=o(x),F=a(16),O=o(F),M=a(214),S=r(M),D=function(e){function t(e){(0,u.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.onUserChanged=a.onUserChanged.bind(a),a.state={user:B.default.getCurrentUser()},document.getElementById("root").className+=" channel-view",a}return(0,v.default)(t,e),(0,l.default)(t,[{key:"isValidState",value:function(){return null!=this.state.user}},{key:"onUserChanged",value:function(){var e=B.default.getCurrentUser();O.areObjectsEqual(this.state.user,e)||this.setState({user:e})}},{key:"componentDidMount",value:function(){E.initialize(),B.default.addChangeListener(this.onUserChanged),window.addEventListener("focus",this.onFocusListener),window.addEventListener("blur",this.onBlurListener),j.isIos()?(0,h.default)("body").addClass("ios"):j.isAndroid()&&(0,h.default)("body").addClass("android"),this.state.user||((0,h.default)("#root").attr("class",""),k.emitUserLoggedOutEvent("/login")),(0,h.default)("body").on("mouseenter mouseleave",".post",function(e){"mouseenter"===e.type?((0,h.default)(this).parent("div").prev(".date-separator, .new-separator").addClass("hovered--after"),(0,h.default)(this).parent("div").next(".date-separator, .new-separator").addClass("hovered--before")):((0,h.default)(this).parent("div").prev(".date-separator, .new-separator").removeClass("hovered--after"),(0,h.default)(this).parent("div").next(".date-separator, .new-separator").removeClass("hovered--before"))}),(0,h.default)("body").on("mouseenter mouseleave",".search-item__container .post",function(e){"mouseenter"===e.type?((0,h.default)(this).closest(".search-item__container").find(".date-separator").addClass("hovered--after"),(0,h.default)(this).closest(".search-item__container").next("div").find(".date-separator").addClass("hovered--before")):((0,h.default)(this).closest(".search-item__container").find(".date-separator").removeClass("hovered--after"),(0,h.default)(this).closest(".search-item__container").next("div").find(".date-separator").removeClass("hovered--before"))}),(0,h.default)("body").on("mouseenter mouseleave",".post.post--comment.same--root",function(e){"mouseenter"===e.type?((0,h.default)(this).parent("div").prev(".date-separator, .new-separator").addClass("hovered--comment"),(0,h.default)(this).parent("div").next(".date-separator, .new-separator").addClass("hovered--comment")):((0,h.default)(this).parent("div").prev(".date-separator, .new-separator").removeClass("hovered--comment"),(0,h.default)(this).parent("div").next(".date-separator, .new-separator").removeClass("hovered--comment"))}),(0,h.default)(window).on("keydown.preventBackspace",function(e){8!==e.which||(0,h.default)(e.target).is("input, textarea")||e.preventDefault()}),"true"===window.mm_config.EnableCustomEmoji&&(0,_.loadEmoji)(!1)}},{key:"componentWillUnmount",value:function(){E.close(),B.default.removeChangeListener(this.onUserChanged),(0,h.default)("body").off("click.userpopover"),(0,h.default)("body").off("mouseenter mouseleave",".post"),(0,h.default)("body").off("mouseenter mouseleave",".post.post--comment.same--root"),(0,h.default)(".modal").off("show.bs.modal"),(0,h.default)(window).off("keydown.preventBackspace"),window.removeEventListener("focus",this.onFocusListener),window.removeEventListener("blur",this.onBlurListener)}},{key:"render",value:function(){return this.isValidState()?b.default.cloneElement(this.props.children,{user:this.state.user}):b.default.createElement(S.default,null)}},{key:"onFocusListener",value:function(){k.emitBrowserFocus(!0)}},{key:"onBlurListener",value:function(){k.emitBrowserFocus(!1)}}]),t}(b.default.Component);t.default=D,D.propTypes={children:y.default.object}}});
//# sourceMappingURL=40.0242c9dea7f0889d7024.js.map