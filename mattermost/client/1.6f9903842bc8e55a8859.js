webpackJsonp([1],{2366:function(e,t,a){"use strict";(function(e){function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(42),i=s(n),l=a(144),r=s(l),o=a(5),u=s(o),d=a(3),m=s(d),c=a(4),f=s(c),p=a(6),h=s(p),b=a(7),v=s(b),_=a(0),g=s(_),y=a(8),M=s(y),w=a(1),S=s(w),E=a(17),C=a(36),k=s(C),T=a(27),N=s(T),L=a(656),D=a(16),O=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(D),R=a(2367),z=s(R),F=function(t){function a(e){(0,m.default)(this,a);var t=(0,h.default)(this,(a.__proto__||(0,u.default)(a)).call(this,e));return t.getStateFromStores=t.getStateFromStores.bind(t),t.onChange=t.onChange.bind(t),t.handleResize=t.handleResize.bind(t),t.setStyles=t.setStyles.bind(t),t.state=t.getStateFromStores(),t}return(0,v.default)(a,t),(0,f.default)(a,[{key:"getStateFromStores",value:function(){var e=k.default.getMyTeamMembers(),t=k.default.getCurrentId();return{teams:k.default.getAll(),teamListings:k.default.getTeamListings(),teamMembers:e,currentTeamId:t,show:e&&e.length>1,isMobile:O.isMobile()}}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),k.default.addChangeListener(this.onChange),k.default.addUnreadChangeListener(this.onChange),this.props.actions.getTeams(0,200),this.setStyles()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),k.default.removeChangeListener(this.onChange),k.default.removeUnreadChangeListener(this.onChange)}},{key:"componentDidUpdate",value:function(e,t){this.state.isMobile||(0,g.default)(".team-wrapper").perfectScrollbar(),this.state.currentTeam!==t.currentTeam&&(this.refs.container.scrollTop=0,this.state.isMobile||(0,g.default)(".team-wrapper").perfectScrollbar("update"))}},{key:"onChange",value:function(){this.setState(this.getStateFromStores()),this.setStyles()}},{key:"handleResize",value:function(){var e=this.state.teamMembers;this.setState({show:e&&e.length>1}),this.setStyles()}},{key:"setStyles",value:function(){var e=document.querySelector("#root");this.state.show?e.classList.add("multi-teams"):e.classList.remove("multi-teams")}},{key:"render",value:function(){var t=this;if(!this.state.show)return null;var a=[],s=O.isSystemAdmin(N.default.getCurrentUser().roles),n=new r.default,l=!1;for(var o in this.state.teamMembers)if(this.state.teamMembers.hasOwnProperty(o)){var u=this.state.teamMembers[o];if(u.delete_at>0)continue;var d=u.team_id;a.push((0,i.default)({unread:u.msg_count>0,mentions:u.mention_count},this.state.teams[d])),n[d]=!0}for(var m in this.state.teamListings)if(this.state.teamListings.hasOwnProperty(m)&&!n[m]){l=!0;break}var c=a.sort(L.sortTeamsByDisplayName).map(function(e){return S.default.createElement(z.default,{key:"switch_team_"+e.name,url:"/"+e.name,tip:e.display_name,active:e.id===t.state.currentTeamId,isMobile:t.state.isMobile,displayName:e.display_name,unread:e.unread,mentions:e.mentions})});return l?c.push(S.default.createElement(z.default,{btnClass:"team-btn__add",key:"more_teams",url:"/select_team",isMobile:this.state.isMobile,tip:S.default.createElement(E.FormattedMessage,{id:"team_sidebar.join",defaultMessage:"Other teams you can join."}),content:S.default.createElement("i",{className:"fa fa-plus"})})):("true"===e.window.mm_config.EnableTeamCreation||s)&&c.push(S.default.createElement(z.default,{btnClass:"team-btn__add",key:"more_teams",url:"/create_team",isMobile:this.state.isMobile,tip:S.default.createElement(E.FormattedMessage,{id:"navbar_dropdown.create",defaultMessage:"Create a New Team"}),content:S.default.createElement("i",{className:"fa fa-plus"})})),S.default.createElement("div",{className:"team-sidebar"},S.default.createElement("div",{className:"team-wrapper"},c))}}]),a}(S.default.Component);F.propTypes={actions:M.default.shape({getTeams:M.default.func.isRequired}).isRequired},t.default=F}).call(t,a(23))},2367:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(5),i=s(n),l=a(3),r=s(l),o=a(4),u=s(o),d=a(6),m=s(d),c=a(7),f=s(c),p=a(8),h=s(p),b=a(1),v=s(b),_=a(35),g=a(34),y=a(215),M=a(387),w=a(9),S=s(w),E=a(73),C=function(e){function t(e){(0,r.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.handleSwitch=a.handleSwitch.bind(a),a.handleDisabled=a.handleDisabled.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"handleSwitch",value:function(e){e.preventDefault(),(0,y.trackEvent)("ui","ui_team_sidebar_switch_team"),(0,M.switchTeams)(this.props.url)}},{key:"handleDisabled",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this.props.active?"active":"",t=this.props.btnClass,a=this.props.disabled?"team-disabled":"",s=this.props.active||this.props.disabled?this.handleDisabled:this.handleSwitch,n=void 0;e||(e=this.props.unread?"unread":"",this.props.mentions&&(n=v.default.createElement("span",{className:"badge pull-right small"},this.props.mentions)));var i=void 0,l=this.props.displayName,r=this.props.content;r||(l=l.replace(/\s/g,"").substring(0,2),r=v.default.createElement("div",{className:"team-btn__initials"},l,v.default.createElement("div",{className:"team-btn__content"},this.props.displayName))),i=this.props.isMobile?v.default.createElement("div",{className:"team-btn "+t},n,r):v.default.createElement(_.OverlayTrigger,{trigger:["hover","focus"],delayShow:S.default.OVERLAY_TIME_DELAY,placement:this.props.placement,overlay:v.default.createElement(_.Tooltip,{id:"tooltip-"+this.props.url},this.props.tip)},v.default.createElement("div",{className:"team-btn "+t},n,r));var o=void 0;return o=(0,E.isDesktopApp)()?v.default.createElement("button",{className:"btn btn-link "+a,onClick:s},i):v.default.createElement(g.Link,{className:a,to:this.props.url,onClick:s},i),v.default.createElement("div",{className:"team-container "+e},o)}}]),t}(v.default.Component);t.default=C,C.defaultProps={btnClass:"",tip:"",placement:"right",active:!1,disabled:!1,unread:!1,mentions:0},C.propTypes={btnClass:h.default.string,url:h.default.string.isRequired,displayName:h.default.string,content:h.default.node,tip:h.default.node.isRequired,active:h.default.bool,disabled:h.default.bool,isMobile:h.default.bool,unread:h.default.bool,mentions:h.default.number,placement:h.default.oneOf(["left","right","top","bottom"])}},291:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function n(e,t){return(0,r.default)({},t)}function i(e){return{actions:(0,u.bindActionCreators)({getTeams:d.getTeams},e)}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(19),r=s(l),o=a(26),u=a(21),d=a(114),m=a(2366),c=s(m);t.default=(0,o.connect)(n,i)(c.default)}});
//# sourceMappingURL=1.6f9903842bc8e55a8859.js.map